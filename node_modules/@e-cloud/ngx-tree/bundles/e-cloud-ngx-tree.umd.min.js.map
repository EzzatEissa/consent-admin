{
  "version": 3,
  "file": "e-cloud-ngx-tree.umd.min.js",
  "sources": [
    "ng://@e-cloud/ngx-tree/node_modules/tslib/tslib.es6.js",
    "ng://@e-cloud/ngx-tree/out/constants/keys.ts",
    "ng://@e-cloud/ngx-tree/out/models/actions.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-options.ts",
    "ng://@e-cloud/ngx-tree/out/constants/events.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-node.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-model.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-loading/tree-loading.component.ts",
    "ng://@e-cloud/ngx-tree/out/services/tree-virtual-scroll.service.ts",
    "ng://@e-cloud/ngx-tree/out/util.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-children/tree-node-children.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-content/tree-node-content.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-drop-slot/tree-node-drop-slot.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-expander/tree-node-expander.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-wrapper/tree-node-wrapper.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node/tree-node.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-viewport/tree-viewport.component.ts",
    "ng://@e-cloud/ngx-tree/out/services/tree-dragging-target.service.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree/tree.component.ts",
    "ng://@e-cloud/ngx-tree/out/directives/tree-drag.directive.ts",
    "ng://@e-cloud/ngx-tree/out/directives/tree-drop.directive.ts",
    "ng://@e-cloud/ngx-tree/out/index.ts"
  ],
  "sourcesContent": [
    "/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = Object.setPrototypeOf ||\r\n    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = Object.assign || function __assign(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n    }\r\n    return t;\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n",
    "export const NUMBER_KEYS = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n}\n\nexport const STRING_KEYS = {\n    LEFT: 'ArrowLeft',\n    UP: 'ArrowUp',\n    RIGHT: 'ArrowRight',\n    DOWN: 'ArrowDown',\n    ENTER: 'Enter',\n    SPACE: ' ',\n}\n",
    "import { NUMBER_KEYS } from '../constants/keys'\nimport { TreeModel } from './tree-model'\nimport { TreeNode } from './tree-node'\nimport { ActionMapping } from './tree-options'\n\nexport const TREE_ACTIONS = {\n    TOGGLE_SELECTED: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(),\n    TOGGLE_SELECTED_MULTI: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(true),\n    SELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setActive(true),\n    DESELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setActive(false),\n    FOCUS: (tree: TreeModel, node: TreeNode, $event: any) => node.focus(),\n    TOGGLE_EXPANDED: (tree: TreeModel, node: TreeNode, $event: any) => {\n        $event.stopPropagation()\n\n        return node.hasChildren && node.toggleExpanded()\n    },\n    EXPAND: (tree: TreeModel, node: TreeNode, $event: any) => node.expand(),\n    COLLAPSE: (tree: TreeModel, node: TreeNode, $event: any) => node.collapse(),\n    DRILL_DOWN: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillDown(),\n    DRILL_UP: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillUp(),\n    NEXT_NODE: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusNextNode(),\n    PREVIOUS_NODE: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusPreviousNode(),\n    MOVE_NODE: (\n        tree: TreeModel,\n        node: TreeNode,\n        $event: any,\n        { from, to }: { from: TreeNode; to: { parent: TreeNode; index: number, dropOnNode: boolean } },\n    ) => {\n        // default action assumes from = node, to = {parent, index}\n        tree.moveNode(from, to)\n    },\n}\n\nexport const defaultActionMapping: ActionMapping = {\n    mouse: {\n        click: TREE_ACTIONS.TOGGLE_SELECTED,\n        dblClick: null,\n        contextMenu: null,\n        expanderClick: TREE_ACTIONS.TOGGLE_EXPANDED,\n        drop: TREE_ACTIONS.MOVE_NODE,\n    },\n    keys: {\n        [NUMBER_KEYS.RIGHT]: TREE_ACTIONS.DRILL_DOWN,\n        [NUMBER_KEYS.LEFT]: TREE_ACTIONS.DRILL_UP,\n        [NUMBER_KEYS.DOWN]: TREE_ACTIONS.NEXT_NODE,\n        [NUMBER_KEYS.UP]: TREE_ACTIONS.PREVIOUS_NODE,\n        [NUMBER_KEYS.SPACE]: TREE_ACTIONS.TOGGLE_SELECTED,\n        [NUMBER_KEYS.ENTER]: TREE_ACTIONS.TOGGLE_SELECTED,\n    },\n}\n",
    "import defaults from 'lodash-es/defaults'\nimport defaultsDeep from 'lodash-es/defaultsDeep'\nimport isNumber from 'lodash-es/isNumber'\nimport { defaultActionMapping } from './actions'\nimport { TreeModel } from './tree-model'\nimport { TreeNode } from './tree-node'\n\n/**\n * common functions to handle tree actions\n */\nexport interface ActionHandler {\n    (tree: TreeModel, node: TreeNode, $event: any, ...rest);\n}\n\n/**\n * a mapping model to link mouse events and keyboard events with actions\n */\nexport interface ActionMapping {\n    mouse?: {\n        click?: ActionHandler,\n        dblClick?: ActionHandler,\n        contextMenu?: ActionHandler,\n        expanderClick?: ActionHandler,\n        dragStart?: ActionHandler,\n        drag?: ActionHandler,\n        dragEnd?: ActionHandler,\n        dragOver?: ActionHandler,\n        dragLeave?: ActionHandler,\n        dragEnter?: ActionHandler,\n        drop?: ActionHandler,\n    };\n    keys?: {\n        [key: number]: ActionHandler\n    };\n}\n\nexport interface DropTarget {\n    parent: TreeNode\n    index: number\n}\n\nexport type IAllowDropFn = (element: TreeNode, to: DropTarget, $event?: DragEvent) => boolean\n\nexport type IAllowDragFn = (node: TreeNode) => boolean\n\nexport type ILevelPaddingFn = (node: TreeNode) => string\n\nexport const defaultUIOptions: TreeUIOptions = {\n    allowDrag: false,\n    allowDrop: false,\n    levelPadding: () => '0px',\n    useVirtualScroll: false,\n    nodeClass: () => '',\n}\n\nexport const defaultDataOptions: TreeDataOptions = {\n    childrenField: 'children',\n    displayField: 'name',\n    idField: 'id',\n    isExpandedField: 'isExpanded',\n    actionMapping: defaultActionMapping,\n    getChildren: (node) => null,\n}\n\nexport interface TreeUIOptions {\n    /**\n     * Specify if dragging tree nodes is allowed.\n     * This could be a boolean, or a function that receives a TreeNode and returns a boolean\n     *\n     * **Default value: false**\n     *\n     * Example:\n     * ```\n     * options = {\n     *   allowDrag: true\n     * }\n     * ```\n     */\n    allowDrag?: boolean | IAllowDragFn;\n    /**\n     * Specify whether dropping inside the tree is allowed. Optional types:\n     *  - boolean\n     *  - (element:any, to:{parent:ITreeNode, index:number}):boolean\n     * A function that receives the dragged element, and the drop location (parent node and index inside the parent),\n     * and returns true or false.\n     *\n     * **Default Value: true**\n     *\n     * example:\n     * ```\n     * options = {\n     *  allowDrop: (element, {parent, index}) => parent.isLeaf\n     * }\n     * ```\n     */\n    allowDrop?: boolean | IAllowDropFn;\n    /**\n     * Specify padding per node instead of children padding (to allow full row select for example)\n     */\n    levelPadding?: ILevelPaddingFn;\n    /**\n     * Boolean whether virtual scroll should be used.\n     * Increases performance for large trees\n     * Default is false\n     */\n    useVirtualScroll?: boolean;\n\n    /**\n     * Supply function for getting a custom class for the node component\n     */\n    nodeClass?(node: TreeNode): string;\n}\n\nexport interface RawTreeUIOptions {\n    allowDrag?: boolean | IAllowDragFn;\n    allowDrop?: boolean | IAllowDropFn;\n    levelPadding?: number | ILevelPaddingFn;\n    useVirtualScroll?: boolean;\n\n    nodeClass?(node: TreeNode): string;\n}\n\n/**\n * create tree options about UI with defaults\n * @param rawOpts\n */\nexport function createTreeUIOptions(rawOpts: RawTreeUIOptions = {}): TreeUIOptions {\n    const levelPaddingOpt = rawOpts.levelPadding\n    if (isNumber(levelPaddingOpt)) {\n        rawOpts.levelPadding = function (node: TreeNode) {\n            return (levelPaddingOpt + levelPaddingOpt * (node.level - 1)) + 'px'\n        }\n    }\n\n    return defaults({}, rawOpts, defaultUIOptions)\n}\n\nexport interface TreeDataOptions {\n    /**\n     * Override children field. Default: 'children'\n     */\n    childrenField?: string;\n    /**\n     * Override display field. Default: 'name'\n     */\n    displayField?: string;\n    /**\n     * Override id field. Default: 'id'\n     */\n    idField?: string;\n    /**\n     * Override isExpanded field. Default: 'isExpanded'\n     */\n    isExpandedField?: string;\n    /**\n     * Change the default mouse and key actions on the tree\n     */\n    actionMapping?: ActionMapping;\n\n    /**\n     * Supply function for getting fields asynchronously. Should return a Promise\n     */\n    getChildren?(node: TreeNode): Promise<any[]>;\n}\n\n/**\n * create tree options about data with defaults\n * @param rawOpts\n */\nexport function createTreeDataOptions(rawOpts: TreeDataOptions = {}): TreeDataOptions {\n    return defaultsDeep({}, rawOpts, defaultDataOptions)\n}\n\n// export const TREE_DATA_OPTIONS = new InjectionToken('TREE_DATA_OPTIONS')\n",
    "import { EventEmitter } from '@angular/core'\nimport { TreeEvent } from '../models/index'\n\nexport const TREE_EVENTS = {\n    expand: 'expand',\n    collapse: 'collapse',\n    toggleExpander: 'toggleExpander',\n    activate: 'activate',\n    deactivate: 'deactivate',\n    focus: 'focus',\n    blur: 'blur',\n    initialized: 'initialized',\n    moveNode: 'moveNode',\n    loadChildren: 'loadChildren',\n    changeFilter: 'changeFilter',\n    removeNode: 'removeNode',\n    addNode: 'addNode',\n}\n\n/**\n * all events that the tree will trigger\n */\nexport interface EventsMap {\n    expand: EventEmitter<TreeEvent>\n    collapse: EventEmitter<TreeEvent>\n    toggleExpander: EventEmitter<TreeEvent>\n    /**\n     * normally triggered by clicking or tabbing the enter key\n     */\n    activate: EventEmitter<TreeEvent>\n    deactivate: EventEmitter<TreeEvent>\n    /**\n     * focus is different from activate, because focus can be changed by arrow keys of keyboard\n     */\n    focus: EventEmitter<TreeEvent>\n    blur: EventEmitter<TreeEvent>\n    initialized: EventEmitter<TreeEvent>\n    moveNode: EventEmitter<TreeEvent>\n    loadChildren: EventEmitter<TreeEvent>\n    changeFilter: EventEmitter<TreeEvent>\n    removeNode: EventEmitter<TreeEvent>\n    addNode: EventEmitter<TreeEvent>\n}\n",
    "import { ElementRef } from '@angular/core'\nimport first from 'lodash-es/first'\nimport last from 'lodash-es/last'\nimport pullAt from 'lodash-es/pullAt'\nimport without from 'lodash-es/without'\nimport { TREE_EVENTS } from '../constants/events'\nimport { TreeEvent } from './events'\nimport { TreeModel } from './tree-model'\nimport { TreeDataOptions } from './tree-options'\n\nexport class TreeNode {\n    /**\n     * The children of the node.\n     * By default is determined by 'node.data.children', unless stated otherwise in the options\n     */\n    children: TreeNode[]\n    /**\n     * top edge position relative to the top edge of scroll area\n     */\n    position = 0\n    /**\n     * the visual height of the node\n     */\n    height = 0\n    loadingChildren = false\n    elementRef: ElementRef\n\n    get isHidden() {\n        return this.treeModel.isNodeHidden(this)\n    }\n\n    get isExpanded() {\n        return this.treeModel.isNodeExpanded(this)\n    }\n\n    get isCollapsed() {\n        return !this.isExpanded\n    }\n\n    get isActive() {\n        return this.treeModel.isNodeActive(this)\n    }\n\n    get isFocused() {\n        return this.treeModel.isNodeFocused(this)\n    }\n\n    get isLeaf() {\n        return !this.hasChildren\n    }\n\n    get isRoot() {\n        return this.parent === null\n    }\n\n    /**\n     * Level in the tree (starts from 1).\n     */\n    get level() {\n        return this.parent ? this.parent.level + 1 : 0\n    }\n\n    /**\n     * Path in the tree: Array of IDs.\n     */\n    get path(): string[] {\n        return this.parent ? [...this.parent.path, this.id] : []\n    }\n\n    // helper get functions:\n    get hasChildren() {\n        return !!(this.data.hasChildren || (this.children && this.children.length > 0))\n    }\n\n    // helper get functions:\n    get hasVisibleChildren() {\n        return !!(this.data.hasChildren || (this.visibleChildren && this.visibleChildren.length > 0))\n    }\n\n    // proxy functions:\n    get options(): TreeDataOptions {\n        return this.treeModel.options\n    }\n\n    // field accessors:\n    /**\n     * The value of the node's field that is used for displaying its content.\n     * By default 'name', unless stated otherwise in the options\n     */\n    get displayField() {\n        return this.getField('display')\n    }\n\n    /**\n     * A unique key of this node among its siblings.\n     * By default it's the 'id' of the original node, unless stated otherwise in options.idField\n     */\n    get id() {\n        return this.getField('id')\n    }\n\n    set id(value) {\n        this.setField('id', value)\n    }\n\n    get visibleChildren() {\n        return (this.children || []).filter((node) => !node.isHidden)\n    }\n\n    constructor(\n        /**\n         * Pointer to the original data.\n         */\n        public data: any,\n        /**\n         * Parent node\n         */\n        public parent: TreeNode,\n        public treeModel: TreeModel,\n        /**\n         * index of the node inside its parent's children\n         */\n        public index: number,\n    ) {\n        // Make sure there's a unique id without overriding existing ids to work with immutable data structures\n        if (this.id === undefined || this.id === null) {\n            this.id = uuid()\n        }\n\n        treeModel.addCache(this)\n        if (data[this.options.isExpandedField]) {\n            treeModel.setExpandedNodeInPlace(this)\n        }\n\n        if (this.getField('children')) {\n            this.initChildren()\n        }\n    }\n\n    /**\n     * Fire an event to the renderer of the tree (if it was registered)\n     */\n    fireEvent(event: TreeEvent) {\n        this.treeModel.fireEvent(event)\n    }\n\n    getField(key: string) {\n        return this.data[this.options[`${key}Field`]]\n    }\n\n    setField(key: string, value) {\n        this.data[this.options[`${key}Field`]] = value\n    }\n\n    onDrop($event) {\n        this.mouseAction('drop', $event.event, {\n            from: $event.element,\n            to: { parent: this, index: 0, dropOnNode: true },\n        })\n    }\n\n    // traversing:\n    findAdjacentSibling(steps: number, skipHidden = false) {\n        return this.getParentChildren(skipHidden)[this.index + steps]\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns next sibling (or null)\n     */\n    findNextSibling(skipHidden = false) {\n        return this.findAdjacentSibling(+1, skipHidden)\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns previous sibling (or null)\n     */\n    findPreviousSibling(skipHidden = false) {\n        return this.findAdjacentSibling(-1, skipHidden)\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns first child (or null)\n     */\n    getFirstChild(skipHidden = false) {\n        const children = skipHidden ? this.visibleChildren : this.children\n\n        return first(children || [])\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns last child (or null)\n     */\n    getLastChild(skipHidden = false) {\n        const children = skipHidden ? this.visibleChildren : this.children\n\n        return last(children || [])\n    }\n\n    /**\n     * Finds the visually next node in the tree.\n     * @param goInside whether to look for children or just siblings\n     * @param skipHidden\n     * @returns next node.\n     */\n    findNextNode(goInside = true, skipHidden = false) {\n        return goInside && this.isExpanded && this.getFirstChild(skipHidden) ||\n            this.findNextSibling(skipHidden) ||\n            this.parent && this.parent.findNextNode(false, skipHidden)\n    }\n\n    /**\n     * Finds the visually previous node in the tree.\n     * @param skipHidden whether to skip hidden nodes\n     * @returns previous node.\n     */\n    findPreviousNode(skipHidden = false) {\n        const previousSibling = this.findPreviousSibling(skipHidden)\n        if (!previousSibling) {\n            return this.parent\n        }\n\n        return previousSibling.getLastOpenDescendant(skipHidden)\n    }\n\n    /**\n     * @returns      true if this node is a descendant of the parameter node\n     */\n    isDescendantOf(node: TreeNode) {\n        if (this === node) {\n            return true\n        } else {\n            return this.parent && this.parent.isDescendantOf(node)\n        }\n    }\n\n    // helper methods:\n    loadChildren() {\n        if (!this.options.getChildren) {\n            return Promise.resolve() // Not getChildren method - for using redux\n        }\n\n        this.loadingChildren = true\n\n        return Promise.resolve(this.options.getChildren(this))\n            .then((children) => {\n                if (children) {\n                    this.setField('children', children)\n                    this.initChildren()\n                }\n            })\n            .then(() => {\n                this.loadingChildren = false\n                this.fireEvent({\n                    eventName: TREE_EVENTS.loadChildren,\n                    node: this,\n                })\n            })\n    }\n\n    /**\n     * Expands the node\n     */\n    expand() {\n        if (!this.isExpanded) {\n            return this.toggleExpanded()\n        }\n\n        return Promise.resolve()\n    }\n\n    /**\n     * Collapses the node\n     */\n    collapse() {\n        if (this.isExpanded) {\n            this.toggleExpanded()\n        }\n\n        return this\n    }\n\n    /**\n     * Invokes a method for every node under this one - depth first\n     * @param fn  a function that receives the node\n     */\n    traverse(fn: (node: TreeNode) => any) {\n        Promise.resolve(fn(this)).then(() => {\n            if (this.children) {\n                this.children.forEach((child) => child.traverse(fn))\n            }\n        })\n    }\n\n    /**\n     * expand all nodes under this one\n     */\n    expandAll() {\n        this.traverse((node) => node.expand())\n    }\n\n    /**\n     * collapse all nodes under this one\n     */\n    collapseAll() {\n        this.traverse((node) => node.collapse())\n    }\n\n    /**\n     * Expands / Collapses the node\n     */\n    toggleExpanded(isExpanded = !this.isExpanded) {\n        if (this.hasChildren) {\n            this.treeModel.setExpandedNode(this, isExpanded)\n\n            if (!this.children && this.hasChildren && isExpanded) {\n                return this.loadChildren()\n            }\n        }\n\n        return Promise.resolve()\n    }\n\n    setActive(isActive = true, isMulti = false) {\n        this.treeModel.setActiveNode(this, isActive, isMulti)\n\n        return this\n    }\n\n    /**\n     * @param isHidden  if true makes the node hidden, otherwise visible\n     */\n    setHidden(isHidden = true) {\n        this.treeModel.setHiddenNode(this, isHidden)\n\n        return this\n    }\n\n    /**\n     * Activates / Deactivates the node (selects / deselects)\n     */\n    toggleActivated(isMulti = false) {\n        this.setActive(!this.isActive, isMulti)\n\n        return this\n    }\n\n    setActiveAndVisible(isMulti = false) {\n        this.setActive(true, isMulti)\n            .ensureVisible()\n\n        this.scrollIntoView()\n\n        return this\n    }\n\n    /**\n     * Expands all ancestors of the node\n     */\n    ensureVisible() {\n        if (this.parent) {\n            this.parent.expand()\n            this.parent.ensureVisible()\n        }\n\n        return this\n    }\n\n    scrollIntoView(force = false, scrollToMiddle?: boolean) {\n        this.treeModel.scrollIntoView(this, force, scrollToMiddle)\n    }\n\n    /**\n     * Focus on the node\n     */\n    focus(scroll = true) {\n        const previousNode = this.treeModel.focusedNode\n        this.treeModel.setFocusedNode(this)\n        if (scroll) {\n            this.scrollIntoView()\n        }\n        if (previousNode) {\n            this.fireEvent({ eventName: TREE_EVENTS.blur, node: previousNode })\n        }\n        this.fireEvent({ eventName: TREE_EVENTS.focus, node: this })\n\n        return this\n    }\n\n    /**\n     * Blur (unfocus) the node\n     */\n    blur() {\n        const previousNode = this.treeModel.focusedNode\n        this.treeModel.setFocusedNode(null)\n        if (previousNode) {\n            this.fireEvent({ eventName: TREE_EVENTS.blur, node: this })\n        }\n\n        return this\n    }\n\n    /**\n     * Hides the node\n     */\n    hide() {\n        this.setHidden(true)\n\n        return this\n    }\n\n    /**\n     * Makes the node visible\n     */\n    show() {\n        this.setHidden(false)\n\n        return this\n    }\n\n    addChild(data: any, index: number) {\n        const node = new TreeNode(data, this, this.treeModel, index)\n\n        // If node doesn't have children - create children array\n        if (!this.getField('children')) {\n            this.setField('children', [])\n        }\n\n        if (this.children) {\n            this.getField('children').splice(index, 0, data)\n            this.children.splice(index, 0, node)\n            this.children = this.children.slice()\n        } else {\n            this.getField('children').push(data)\n            this.children = [node]\n        }\n\n        this.reCalcChildrenIndices(index)\n\n        this.fireEvent({ eventName: TREE_EVENTS.addNode, node })\n    }\n\n    appendChild(data) {\n        this.addChild(data, this.children ? this.children.length : 0)\n    }\n\n    remove() {\n        this.parent.removeChild(this)\n    }\n\n    removeChild(node: TreeNode) {\n        pullAt(this.getField('children'), node.index)\n        this.children = without(this.children, node)\n\n        this.reCalcChildrenIndices(0)\n\n        this.fireEvent({ eventName: TREE_EVENTS.removeNode, node })\n\n        if (node.isFocused) {\n            this.treeModel.setFocusedNode(null)\n            this.treeModel.setActiveNode(node, false)\n        }\n\n        if (node.isExpanded) {\n            this.treeModel.setExpandedNodeInPlace(node, false)\n        }\n\n        node.treeModel = null\n        node.elementRef = null\n    }\n\n    mouseAction(actionName: string, $event: MouseEvent, data: any = null) {\n        this.treeModel.setFocus(true)\n\n        const actionMapping = this.options.actionMapping.mouse\n        const action = actionMapping[actionName]\n\n        if (action) {\n            action(this.treeModel, this, $event, data)\n        }\n    }\n\n    private reCalcChildrenIndices(offset) {\n        this.children.slice(offset).forEach((child, index) => {\n            child.index = index + offset\n        })\n    }\n\n    private initChildren() {\n        this.children = this.getField('children')\n            .map((data, index) => new TreeNode(data, this, this.treeModel, index))\n    }\n\n    private getLastOpenDescendant(skipHidden = false) {\n        const lastChild = this.getLastChild(skipHidden)\n\n        return (this.isCollapsed || !lastChild)\n            ? this\n            : lastChild.getLastOpenDescendant(skipHidden)\n    }\n\n    private getParentChildren(skipHidden = false): TreeNode[] {\n        return this.parent\n            ? (skipHidden ? this.parent.visibleChildren : this.parent.children)\n            : []\n    }\n}\n\nlet _uuid = 0\n\nfunction uuid() {\n    return `ngx-tid-${_uuid++}`\n}\n",
    "import { Partial, PartialDeep } from 'lodash'\nimport compact from 'lodash-es/compact'\nimport find from 'lodash-es/find'\nimport first from 'lodash-es/first'\nimport isFunction from 'lodash-es/isFunction'\nimport isString from 'lodash-es/isString'\nimport last from 'lodash-es/last'\nimport { Observer, Subject } from 'rxjs'\nimport { EventsMap, TREE_EVENTS } from '../constants/events'\nimport { TreeEvent } from './events'\nimport { TreeNode } from './tree-node'\nimport { createTreeDataOptions, TreeDataOptions } from './tree-options'\n\nexport interface ScrollIntoViewTarget {\n    node: TreeNode\n    force: boolean\n    scrollToMiddle: boolean\n}\n\nexport class TreeModel {\n    /**\n     * static cache for recording the tree model while using multiple tree component in same container.\n     */\n    static focusedTree: TreeModel = null\n\n    /**\n     * All root nodes, it will have one item if a user input a single root tree.\n     */\n    roots: TreeNode[]\n    /**\n     * a tree node created internally to represent the root node of input data\n     */\n    readonly virtualRoot: TreeNode\n    readonly scrollIntoView$: Subject<ScrollIntoViewTarget> = new Subject()\n\n    /**\n     * Is the tree currently focused\n     */\n    get isFocused() {\n        return TreeModel.focusedTree === this\n    }\n\n    /**\n     * if the tree is empty\n     */\n    get isEmptyTree() {\n        return this.roots && this.roots.length === 0\n    }\n\n    /**\n     * Current focused node\n     */\n    get focusedNode() {\n        return this.focusedNodeId ? this.getNodeById(this.focusedNodeId) : null\n    }\n\n    /**\n     * @returns Current expanded nodes\n     */\n    get expandedNodes(): TreeNode[] {\n        const nodes = Array.from(this.expandedNodeIds.keys())\n            .filter((id) => this.expandedNodeIds.get(id))\n            .map((id) => this.getNodeById(id))\n\n        return compact(nodes)\n    }\n\n    /**\n     * @returns Current active (selected) nodes\n     */\n    get activeNodes(): TreeNode[] {\n        const nodes = Array.from(this.activeNodeIds.keys())\n            .filter((id) => this.activeNodeIds.get(id))\n            .map((id) => this.nodeCache.get(id))\n\n        return compact(nodes)\n    }\n\n    private focusedNodeId: string = null\n    private expandedNodeIds: Map<string, boolean> = new Map()\n    private activeNodeIds: Map<string, boolean> = new Map()\n    private hiddenNodeIds: Map<string, boolean> = new Map()\n    private nodeCache: Map<string, TreeNode> = new Map()\n\n    constructor(\n        private nodes: any[],\n        public events: EventsMap,\n        /**\n         * Options that are passed to the tree component\n         */\n        public options?: TreeDataOptions,\n    ) {\n        this.options = createTreeDataOptions(options)\n        const virtualRootConfig = {\n            virtual: true,\n            // todo: determine to use fixed children field later\n            [this.options.childrenField]: this.nodes,\n        }\n\n        this.virtualRoot = new TreeNode(virtualRootConfig, null, this, 0)\n        this.setExpandedNodeInPlace(this.virtualRoot)\n\n        this.roots = this.virtualRoot.children\n    }\n\n    addCache(node: TreeNode) {\n        this.nodeCache.set(node.id, node)\n    }\n\n    updateOptions(options: TreeDataOptions) {\n        this.options = options\n    }\n\n    // events\n    fireEvent(event: TreeEvent) {\n        // event.treeModel = this\n\n        this.events[event.eventName].emit(event)\n    }\n\n    subscribe(eventName: string, fn: Observer<TreeEvent>) {\n        return this.events[eventName].subscribe(fn)\n    }\n\n    // getters\n    /**\n     * @returns Current active (selected) node. If multiple nodes are active - returns the first one.\n     */\n    getActiveNode(): TreeNode {\n        return this.activeNodes[0]\n    }\n\n    /**\n     * @returns All root nodes that pass the current filter\n     */\n    getVisibleRoots() {\n        return this.virtualRoot.visibleChildren\n    }\n\n    /**\n     * @param skipHidden  true or false - whether to skip hidden nodes\n     * @returns      first root of the tree\n     */\n    getFirstRoot(skipHidden = false) {\n        return first(skipHidden ? this.getVisibleRoots() : this.roots)\n    }\n\n    /**\n     * @param skipHidden  true or false - whether to skip hidden nodes\n     * @returns      last root of the tree\n     */\n    getLastRoot(skipHidden = false) {\n        return last(skipHidden ? this.getVisibleRoots() : this.roots)\n    }\n\n    // locating nodes\n    /**\n     * @param     path  array of node IDs to be traversed respectively\n     * @param     startNode  optional. Which node to start traversing from\n     * @returns   The node, if found - null otherwise\n     */\n    getNodeByPath(path: (string | number)[], startNode: TreeNode = null): TreeNode {\n        if (!path) {\n            return null\n        }\n\n        startNode = startNode || this.virtualRoot\n\n        if (path.length === 0) {\n            return startNode\n        }\n\n        if (!startNode.children) {\n            return null\n        }\n\n        const childId = path.shift()\n        const childNode = find<TreeNode>(startNode.children, { id: childId } as any)\n\n        if (!childNode) {\n            return null\n        }\n\n        return this.getNodeByPath(path, childNode)\n    }\n\n    /**\n     * @param     id  node ID to find\n     * @returns   The node, if found - null otherwise\n     */\n    getNodeById(id: string) {\n        return this.nodeCache.get(id)\n    }\n\n    /**\n     * @param     predicate - either an object or a function, used as a test condition on all nodes.\n     *            Could be every predicate that's supported by lodash's `find` method\n     * @param     startNode  optional. Which node to start traversing from\n     * @returns   First node that matches the predicate, if found - null otherwise\n     */\n    getNodeBy(predicate: (node: TreeNode) => boolean, startNode: TreeNode = null) {\n        // todo: refactor to a loop\n        startNode = startNode || this.virtualRoot\n\n        if (!startNode.children) {\n            return null\n        }\n\n        const found = find(startNode.children, predicate)\n\n        if (found) { // found in children\n            return found\n        } else { // look in children's children\n            for (const child of startNode.children) {\n                const foundInChildren = this.getNodeBy(predicate, child)\n                if (foundInChildren) {\n                    return foundInChildren\n                }\n            }\n        }\n    }\n\n    isNodeExpanded(node: TreeNode) {\n        return !!this.expandedNodeIds.get(node.id)\n    }\n\n    isNodeHidden(node: TreeNode) {\n        return !!this.hiddenNodeIds.get(node.id)\n    }\n\n    isNodeActive(node: TreeNode) {\n        return !!this.activeNodeIds.get(node.id)\n    }\n\n    isNodeFocused(node: TreeNode) {\n        return this.focusedNode === node\n    }\n\n    setActiveNode(node: TreeNode, isActive: boolean, isMulti = false) {\n        if (isMulti) {\n            this.setMultiActiveNodes(node, isActive)\n        } else {\n            this.setSingleActiveNode(node, isActive)\n        }\n\n        if (isActive) {\n            node.focus()\n            this.fireEvent({ eventName: TREE_EVENTS.activate, node })\n        } else {\n            this.fireEvent({ eventName: TREE_EVENTS.deactivate, node })\n        }\n    }\n\n    setExpandedNodeInPlace(node: TreeNode, isExpanded = true) {\n        this.expandedNodeIds.set(node.id, isExpanded)\n    }\n\n    setExpandedNode(node: TreeNode, isExpanded = true) {\n        this.expandedNodeIds.set(node.id, isExpanded)\n        if (isExpanded) {\n            this.fireEvent({ eventName: TREE_EVENTS.expand, node })\n        } else {\n            this.fireEvent({ eventName: TREE_EVENTS.collapse, node })\n        }\n        this.fireEvent({ eventName: TREE_EVENTS.toggleExpander, node, isExpanded })\n    }\n\n    setHiddenNode(node: TreeNode, isHidden = true) {\n        this.hiddenNodeIds.set(node.id, isHidden)\n    }\n\n    /**\n     * Set focus on a node\n     * @param node\n     */\n    setFocusedNode(node: TreeNode) {\n        this.focusedNodeId = node ? node.id : null\n    }\n\n    /**\n     * Focuses or blurs the tree\n     * @param value  true or false - whether to set focus or blur.\n     */\n    setFocus(value: boolean) {\n        TreeModel.focusedTree = value ? this : null\n    }\n\n    traverse(fn: (node: TreeNode) => any) {\n        this.roots.forEach((root) => root.traverse(fn))\n    }\n\n    activateNode(id) {\n        const target = this.getNodeById(id)\n        if (target) {\n            target.setActiveAndVisible()\n\n            return true\n        }\n\n        return false\n    }\n\n    focusNode(id: string) {\n        const target = this.getNodeById(id)\n        if (target) {\n            target.focus()\n\n            return true\n        }\n\n        return false\n    }\n\n    /**\n     * Focuses on the next node in the tree (same as down arrow)\n     */\n    focusNextNode() {\n        const previousNode = this.focusedNode\n        const nextNode = previousNode ? previousNode.findNextNode(true, true) : this.getFirstRoot(true)\n        if (nextNode) {\n            nextNode.focus()\n        }\n    }\n\n    /**\n     * Focuses on the previous node in the tree (same as up arrow)\n     */\n    focusPreviousNode() {\n        const previousNode = this.focusedNode\n        const nextNode = previousNode ? previousNode.findPreviousNode(true) : this.getLastRoot(true)\n        if (nextNode) {\n            nextNode.focus()\n        }\n    }\n\n    /**\n     * Focuses on the inner child of the current focused node (same as right arrow on an expanded node)\n     */\n    focusDrillDown() {\n        const previousNode = this.focusedNode\n        if (previousNode && previousNode.isCollapsed && previousNode.hasChildren) {\n            previousNode.toggleExpanded()\n        } else {\n            const nextNode = previousNode ? previousNode.getFirstChild(true) : this.getFirstRoot(true)\n            if (nextNode) {\n                nextNode.focus()\n            }\n        }\n    }\n\n    /**\n     * Focuses on the parent of the current focused node (same as left arrow on a collapsed node)\n     */\n    focusDrillUp() {\n        const previousNode = this.focusedNode\n        if (!previousNode) {\n            return\n        }\n\n        if (previousNode.isExpanded) {\n            previousNode.toggleExpanded()\n        } else {\n            const nextNode = previousNode.parent\n            if (nextNode) {\n                nextNode.focus()\n            }\n        }\n    }\n\n    /**\n     * expand all nodes\n     */\n    expandAll() {\n        this.roots.forEach((root) => root.expandAll())\n    }\n\n    /**\n     * collapse all nodes\n     */\n    collapseAll() {\n        this.roots.forEach((root) => root.collapseAll())\n    }\n\n    performKeyAction(node: TreeNode, $event: KeyboardEvent) {\n        // todo: the keyCode is deprecated on MDN, replace it some day\n        const action = this.options.actionMapping.keys[$event.keyCode]\n        if (action) {\n            $event.preventDefault()\n            action(this, node, $event)\n\n            return true\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Marks isHidden field in all nodes recursively according to the filter param.\n     * If a node is marked visible, all of its ancestors will be marked visible as well.\n     * @param filter  either a string or a function.\n     *   In case it's a string, it will be searched case insensitively in the node's display attribute\n     *   In case it's a function, it will be passed the node, and should return true if the node should be visible,\n     *     false otherwise\n     * @param autoShow  if true, make sure all nodes that passed the filter are visible\n     */\n    filterNodes(filter: string | ((node: TreeNode) => boolean), autoShow = true) {\n        let filterFn\n\n        if (!filter) {\n            return this.clearFilter()\n        }\n\n        // support function and string filter\n        if (isString(filter)) {\n            filterFn = (node) => node.displayField.toLowerCase().includes(filter.toLowerCase())\n        } else if (isFunction(filter)) {\n            filterFn = filter\n        } else {\n            throw new TypeError(`Don't know what to do with filter: ${filter}. It should be either a string or function`)\n        }\n\n        const ids = new Map()\n        this.roots.forEach((node) => this.filterNode(ids, node, filterFn, autoShow))\n        this.hiddenNodeIds = ids\n        this.fireEvent({ eventName: TREE_EVENTS.changeFilter })\n    }\n\n    /**\n     * Marks all nodes isHidden = false\n     */\n    clearFilter() {\n        this.hiddenNodeIds = new Map()\n        this.fireEvent({ eventName: TREE_EVENTS.changeFilter })\n    }\n\n    /**\n     * moves a node from one location in the tree to another\n     * @param node location has a from and a to attributes, each has a node and index attributes.\n     * The combination of node + index tells which node needs to be moved, and to where\n     * @param to\n     */\n    moveNode(node: TreeNode, to: { parent: TreeNode, index: number, dropOnNode: boolean }) {\n        const fromIndex = node.index\n        const fromParent = node.parent\n\n        if (!canMoveNode(node, fromIndex, to)) {\n            return\n        }\n\n        node.remove()\n\n        // Compensate for index if already removed from parent:\n        const toIndex = (fromParent === to.parent && to.index > fromIndex) ? to.index - 1 : to.index\n\n        if (to.dropOnNode) {\n            to.parent.appendChild(node.data)\n        } else {\n            to.parent.addChild(node.data, toIndex)\n        }\n\n        this.fireEvent({\n            eventName: TREE_EVENTS.moveNode,\n            node,\n            to: { parent: to.parent.data, index: toIndex },\n        })\n    }\n\n    scrollIntoView(node: TreeNode, force: boolean, scrollToMiddle: boolean) {\n        this.scrollIntoView$.next({\n            node, force, scrollToMiddle,\n        })\n    }\n\n    private filterNode(\n        ids: Map<string, boolean>,\n        node: TreeNode,\n        filterFn: (node: TreeNode) => boolean,\n        autoExpand: boolean,\n    ) {\n        // if node passes function then it's visible\n        let isVisible = filterFn(node)\n\n        if (node.children) {\n            // if one of node's children passes filter then this node is also visible\n            node.children.forEach((child) => {\n                if (this.filterNode(ids, child, filterFn, autoExpand)) {\n                    isVisible = true\n                }\n            })\n        }\n\n        // mark node as hidden\n        if (!isVisible) {\n            ids.set(node.id, true)\n        }\n\n        // auto expand parents to make sure the filtered nodes are visible\n        if (autoExpand && isVisible) {\n            node.ensureVisible()\n        }\n\n        return isVisible\n    }\n\n    private setSingleActiveNode(node: TreeNode, active: boolean) {\n        // Deactivate all other nodes:\n        this.activeNodes\n            .filter((activeNode) => activeNode !== node)\n            .forEach((activeNode) => {\n                this.fireEvent({ eventName: TREE_EVENTS.deactivate, node: activeNode })\n            })\n\n        if (active) {\n            this.activeNodeIds = new Map([[node.id, true]])\n        } else {\n            this.activeNodeIds = new Map()\n        }\n    }\n\n    private setMultiActiveNodes(node: TreeNode, active: boolean) {\n        this.activeNodeIds.set(node.id, active)\n    }\n}\n\nfunction canMoveNode(node: TreeNode, fromIndex: number, to: { parent: TreeNode, index: number }) {\n    // same node:\n    if (node.parent === to.parent && fromIndex === to.index) {\n        return false\n    }\n\n    return !to.parent.isDescendantOf(node)\n}\n",
    "import { ChangeDetectionStrategy, Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-loading',\n    template: `<span *ngIf=\"!template\">loading...</span>\n\n<ng-container\n  [ngTemplateOutlet]=\"template\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node }\">\n</ng-container>\n`,\n    styles: [`:host{white-space:nowrap}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeLoadingComponent {\n    @Input() template: TemplateRef<any>\n    @Input() node: TreeNode\n\n    @HostBinding('class.tree-loading') className = true\n}\n",
    "import { Inject, Injectable, InjectionToken } from '@angular/core'\nimport { BehaviorSubject, Subject, Subscription } from 'rxjs'\nimport { filter, scan } from 'rxjs/operators'\nimport { TreeModel, TreeNode } from '../models'\n\nconst Y_OFFSET_NODE_SIZE = 3\nlet id = 0\n\nexport const VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA = new InjectionToken('VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA')\n\n@Injectable()\nexport class TreeVirtualScroll {\n    id: number\n    averageNodeHeight = 0\n    hasEnoughNodeHeight = false\n\n    private currentViewport: ClientRect\n    private lastScrollTop = 0\n    private disabled = false\n\n    private collectionMonitor$ = new BehaviorSubject(null)\n    private nodeHeightAnalytics$ = new Subject()\n\n    constructor(@Inject(VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA) private quota: number) {\n        this.id = id++\n        this.collectAverageNodeHeight()\n    }\n\n    adjustViewport(viewport: ClientRect, scrollTop: number) {\n        this.lastScrollTop = scrollTop\n        this.currentViewport = viewport\n\n        const Y_OFFSET = this.averageNodeHeight * Y_OFFSET_NODE_SIZE\n\n        const startPos = scrollTop > Y_OFFSET ? scrollTop - Y_OFFSET : 0\n        const endPos = viewport.height + scrollTop + Y_OFFSET\n\n        this.collectionMonitor$.next({\n            startPos,\n            endPos,\n        })\n    }\n\n    waitForCollection(observer): Subscription {\n        return this.collectionMonitor$\n            .pipe(filter(val => !!val))\n            .subscribe(observer)\n    }\n\n    reportNodeHeight(data) {\n        this.nodeHeightAnalytics$.next(data)\n    }\n\n    reCalcPositions(treeModel: TreeModel) {\n        // here we reset the root nodes' positions to properly recalculate the positions\n        // after some actions like filter\n        treeModel.roots.forEach(node => {\n            node.position = 0\n        })\n        treeModel.virtualRoot.height = this.getPositionAfter(treeModel.getVisibleRoots(), 0)\n    }\n\n    setDisabled(isDisabled) {\n        this.disabled = isDisabled\n    }\n\n    isDisabled() {\n        return this.disabled\n    }\n\n    scrollIntoView(node: TreeNode, force: boolean, scrollToMiddle = true) {\n        if (force || // force scroll to node\n            node.position < this.lastScrollTop || // node is above viewport\n            node.position + this.averageNodeHeight > this.lastScrollTop + this.currentViewport.height) { // node is below viewport\n\n            return scrollToMiddle ? node.position - this.currentViewport.height / 2 + this.averageNodeHeight : // scroll to middle\n                node.position // scroll to start\n        }\n\n        return null\n    }\n\n    private getPositionAfter(nodes: TreeNode[], startPos: number) {\n        let position = startPos\n\n        nodes.forEach((node) => {\n            node.position = position\n            // as node is hidden, it should play as a shadow node for it next sibling node for\n            // the proper position splitting\n            position = this.getPositionAfterNode(node, node.position, node.isHidden)\n        })\n\n        return position\n    }\n\n    private getPositionAfterNode(node: TreeNode, startPos: number, isPrevShadow = false) {\n        let position = isPrevShadow ? startPos : this.averageNodeHeight + startPos\n\n        if (node.children && node.isExpanded) { // TBD: consider loading component as well\n            position = this.getPositionAfter(node.visibleChildren, position)\n        }\n\n        // todo: here we assume the loading component's height is the same as averageNodeHeight\n        node.height = position - startPos + (node.loadingChildren ? this.averageNodeHeight : 0)\n\n        return position\n    }\n\n    private collectAverageNodeHeight() {\n        this.nodeHeightAnalytics$\n            .pipe(scan<number, number[]>((acc, cur) => {\n                const lastAvg = acc[0] / acc[1]\n                const sum = cur + acc[0]\n                const count = acc[1] + 1\n                const avg = sum / count\n                if (avg / lastAvg > 1.5 || lastAvg / avg > 1.5) {\n                    return [cur, 1]\n                }\n\n                return [sum, count]\n            }, [0, 0]))\n            .subscribe(pair => {\n                this.averageNodeHeight = pair[0] / pair[1]\n                if (pair[1] >= this.quota) {\n                    this.hasEnoughNodeHeight = true\n                }\n            })\n    }\n}\n",
    "/**\n * a binary search function\n * @param nodes\n * @param condition\n * @param firstIndex\n */\nexport function binarySearch<T>(nodes: T[], condition: (item: T) => boolean, firstIndex = 0) {\n    let left = firstIndex\n    let right = nodes.length - 1\n\n    while (left !== right) {\n        const mid = Math.floor((left + right) / 2)\n\n        if (condition(nodes[mid])) {\n            right = mid\n        } else {\n            if (left === mid) {\n                left = right\n            } else {\n                left = mid\n            }\n        }\n    }\n\n    return left\n}\n",
    "import { animate, style, transition, trigger } from '@angular/animations'\nimport { Component, HostBinding, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, } from '@angular/core'\nimport { Subscription } from 'rxjs'\nimport { TreeNode, TreeUIOptions } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\nimport { binarySearch } from '../../util'\n\n/** Time and timing curve for expansion panel animations. */\nexport const EXPANSION_PANEL_ANIMATION_TIMING = '225ms cubic-bezier(0.4,0.0,0.2,1)'\n\n@Component({\n    selector: 'ngx-tree-node-children',\n    template: `<ngx-tree-node *ngFor=\"let child of viewportNodes; let i = index; trackBy: trackNode\"\n               [options]=\"options\"\n               [ngClass]=\"[options.nodeClass(child), 'tree-node-level-'+ child.level]\"\n               [class.tree-node-expanded]=\"child.isExpanded\"\n               [class.tree-node-collapsed]=\"child.isCollapsed\"\n               [class.tree-node-leaf]=\"child.isLeaf\"\n               [class.tree-node-active]=\"child.isActive\"\n               [class.tree-node-focused]=\"child.isFocused\"\n               [node]=\"child\"\n               [index]=\"i\"\n               [templates]=\"templates\">\n</ngx-tree-node>\n\n<ngx-tree-loading *ngIf=\"!node.children\"\n                  [style.padding-left]=\"options.levelPadding(node)\"\n                  [template]=\"templates.loadingTemplate\"\n                  [node]=\"node\"></ngx-tree-loading>\n`,\n    styles: [`:host{display:block;padding-left:20px}:host .tree-children-no-padding{padding-left:0}`],\n    animations: [\n        trigger('expandAnimation', [\n            transition(':enter', [\n                style({ height: 0, overflow: 'hidden' }),\n                animate(EXPANSION_PANEL_ANIMATION_TIMING, style({ height: '*' })),\n            ]),\n            transition(':leave', [\n                style({ height: '*', overflow: 'hidden' }),\n                animate(EXPANSION_PANEL_ANIMATION_TIMING, style({ height: 0 })),\n            ]),\n        ]),\n    ],\n})\nexport class TreeNodeChildrenComponent implements OnInit, OnChanges, OnDestroy {\n    marginTop = 0\n    viewportNodes: TreeNode[] = []\n\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() templates: any\n    @Input() disableMarginTop = false\n    @Input() children: TreeNode[]\n    @Input() refreshTree = false\n\n    @HostBinding('@expandAnimation')\n    expandAnimation = true\n\n    @HostBinding('class.tree-node-children') className = true\n\n    private scrollSub = Subscription.EMPTY\n\n    constructor(private virtualScroll: TreeVirtualScroll) {\n    }\n\n    @HostBinding('class.tree-children-no-padding')\n    get noPadding() {\n        return !this.options.levelPadding\n    }\n\n    @HostBinding('style.margin-top.px')\n    get marginTopAttr() {\n        return this.disableMarginTop ? 0 : this.marginTop\n    }\n\n    ngOnInit() {\n        this.viewportNodes = this.children\n        this.scrollSub = this.virtualScroll.waitForCollection((metrics) => {\n            if (this.node.treeModel && this.node.isExpanded) {\n                // here we directly access node's visibleChildren but not component's `children`\n                // property is, because it will only be updated on next lifecycle check, which is\n                // after the collection notification\n                this.viewportNodes = this.getViewportNodes(this.node.visibleChildren, metrics)\n                this.marginTop = this.calcMarginTop()\n            }\n        })\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if ('children' in changes && changes.children.currentValue) {\n            this.viewportNodes = this.virtualScroll.isDisabled() || this.refreshTree\n                ? this.children : this.viewportNodes\n        }\n    }\n\n    ngOnDestroy() {\n        this.scrollSub.unsubscribe()\n    }\n\n    trackNode(index, node) {\n        return node.id\n    }\n\n    calcMarginTop() {\n        const firstNode = this.viewportNodes && this.viewportNodes.length && this.viewportNodes[0]\n\n        // condition on root node is because the virtual root's self height is 0\n        return firstNode\n            ? Math.max(0, firstNode.position - firstNode.parent.position -\n                (firstNode.parent.isRoot ? 0 : this.virtualScroll.averageNodeHeight))\n            : 0\n    }\n\n    getViewportNodes(nodes: TreeNode[], { startPos, endPos }) {\n        if (!nodes || !nodes.length) {\n            return []\n        }\n\n        // Search for first node in the viewport using binary search\n        // Look for first node that starts after the beginning of the viewport (with buffer)\n        // Or that ends after the beginning of the viewport\n        const firstIndex = binarySearch(nodes, (node) => {\n            return startPos <= node.position || (startPos <= node.position + node.height)\n        })\n\n        // Search for last node in the viewport using binary search\n        // Look for first node that starts after the end of the viewport (with buffer)\n        const lastIndex = binarySearch(nodes, (node) => {\n            return endPos < node.position || (endPos <= node.position + node.height)\n        }, firstIndex)\n\n        const viewportNodes = nodes.slice(firstIndex, lastIndex + 1)\n\n        // console.log(this.node.id, 'first: ', firstIndex, 'last: ', lastIndex, viewportNodes)\n\n        return viewportNodes\n    }\n}\n",
    "import { ChangeDetectionStrategy, Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-content',\n    template: `<span *ngIf=\"!template\">{{ node.displayField }}</span>\n\n<ng-container\n  [ngTemplateOutlet]=\"template\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node, index: index, options: options }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;padding:2px 5px;border-radius:2px;-webkit-transition:background-color .15s,-webkit-box-shadow .15s;transition:background-color .15s,-webkit-box-shadow .15s;transition:background-color .15s,box-shadow .15s;transition:background-color .15s,box-shadow .15s,-webkit-box-shadow .15s;cursor:pointer;white-space:nowrap}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeNodeContentComponent {\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() index: number\n    @Input() template: TemplateRef<any>\n    @HostBinding('class.tree-node-content') className = true\n}\n",
    "import { ChangeDetectionStrategy, Component, Input } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-drop-slot',\n    template: `<div class=\"tree-node-drop-slot\"\n     (ngxTreeDrop)=\"onDrop($event)\"\n     [treeAllowDrop]=\"allowDrop\">\n</div>\n`,\n    styles: [`:host{display:block;width:100%;z-index:1}:host.prev-drop-slot{top:0}:host.next-drop-slot{bottom:0}.tree-node-drop-slot{display:block;height:4px;background-color:#f08080}.tree-node-drop-slot.is-dragging-over{background:#dfe;outline:#888 dashed 2px}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeNodeDropSlotComponent {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() dropIndex: number\n\n    allowDrop = (element, $event) =>\n        isFunction(this.options.allowDrop)\n            ? this.options.allowDrop(element, {\n                parent: this.node,\n                index: this.dropIndex,\n            }, $event)\n            : false\n\n    onDrop($event) {\n        this.node.mouseAction('drop', $event.event, {\n            from: $event.element,\n            to: { parent: this.node, index: this.dropIndex },\n        })\n    }\n}\n",
    "import { Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-expander',\n    template: `<ng-template [ngIf]=\"!template\">\n  <div *ngIf=\"node.hasChildren\"\n        class=\"toggle-children-wrapper\"\n        [class.toggle-children-expanded]=\"node.isExpanded\"\n        [class.toggle-children-collapsed]=\"node.isCollapsed\"\n        (click)=\"node.mouseAction('expanderClick', $event)\">\n    <span class=\"toggle-children\"></span>\n  </div>\n\n  <div *ngIf=\"!node.hasChildren\"\n        class=\"toggle-children-placeholder\"></div>\n</ng-template>\n\n<ng-container [ngTemplateOutlet]=\"template\"\n              [ngTemplateOutletContext]=\"{\n                $implicit: null,\n                node: node,\n                index: index,\n                options: options\n              }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;white-space:nowrap}.toggle-children-expanded .toggle-children{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.toggle-children-collapsed .toggle-children{-webkit-transform:rotate(0);transform:rotate(0)}.toggle-children-wrapper{padding:0 3px;cursor:pointer}.toggle-children{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYzRkRFQjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYzRkRFQjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5iogFwAAAGhJREFUeNpiYGBgKABigf///zOQg0EARH4A4gZyDIIZ8B/JoAJKDIDhB0CcQIkBRBtEyABkgxwoMQCGD6AbRKoBGAYxQgXIBRuZGKgAKPIC3QLxArnRSHZCIjspk52ZKMrOFBUoAAEGAKnq593MQAZtAAAAAElFTkSuQmCC);height:8px;width:9px;background-size:contain;display:inline-block;background-repeat:no-repeat;background-position:center}.toggle-children-placeholder{display:block;height:15px;width:15px}`],\n})\nexport class TreeNodeExpanderComponent {\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() index: number\n    @Input() template: TemplateRef<any>\n\n    @HostBinding('class.tree-node-expander') className = true\n}\n",
    "import { AfterViewInit, Component, ElementRef, HostBinding, Input, OnDestroy, OnInit, } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\n\n@Component({\n    selector: 'ngx-tree-node-wrapper',\n    template: `<ng-template [ngIf]=\"!templates.treeNodeWrapperTemplate\">\n  <ngx-tree-node-expander [node]=\"node\"\n                          [index]=\"index\"\n                          [options]=\"options\"\n                          [template]=\"templates.expanderTemplate\"></ngx-tree-node-expander>\n\n  <ngx-tree-node-content [node]=\"node\"\n                         [index]=\"index\"\n                         [options]=\"options\"\n                         [template]=\"templates.treeNodeTemplate\">\n  </ngx-tree-node-content>\n</ng-template>\n\n<ng-container [ngTemplateOutlet]=\"templates.treeNodeWrapperTemplate\"\n              [ngTemplateOutletContext]=\"{\n                $implicit: null,\n                node: node,\n                index: index,\n                options: options,\n                templates: templates\n              }\">\n</ng-container>\n`,\n    styles: [`:host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}:host ::ng-deep .tree-node-content:hover{background-color:#f7fbff}:host(.ngx-tree-dragging-target) ::ng-deep .tree-node-expander{visibility:hidden}:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content,:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content:hover,:host(.tree-node-wrapper-active).tree-node-wrapper-focused ::ng-deep .tree-node-content{background-color:#beebff}:host(.tree-node-wrapper-focused) ::ng-deep .tree-node-content{background-color:#e7f4f9}:host ::ng-deep .tree-node-content:hover,:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content,:host(.tree-node-wrapper-focused) ::ng-deep .tree-node-content{-webkit-box-shadow:inset 0 0 1px #999;box-shadow:inset 0 0 1px #999}:host(.is-dragging-over) .tree-node-content{position:relative;z-index:1;background-color:#dfe;-webkit-box-shadow:inset 0 0 1px #999;box-shadow:inset 0 0 1px #999;outline:#888 dashed 2px}:host(.is-dragging-over) .tree-node-content *,:host(.is-dragging-over) .tree-node-expander *{pointer-events:none}:host(.is-dragging-over-disabled) .tree-node-content{opacity:.5}`],\n})\nexport class TreeNodeWrapperComponent implements OnInit, OnDestroy, AfterViewInit {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() index: number\n    @Input() templates: any\n\n    @HostBinding('class.tree-node-wrapper') className = true\n\n    constructor(private virtualScroll: TreeVirtualScroll, private elementRef: ElementRef) {\n    }\n\n    ngOnInit() {\n        this.node.elementRef = this.elementRef\n    }\n\n    ngOnDestroy() {\n        this.node.elementRef = null\n    }\n\n    ngAfterViewInit() {\n        if (!this.virtualScroll.isDisabled() && !this.virtualScroll.hasEnoughNodeHeight) {\n            this.virtualScroll.reportNodeHeight(this.elementRef.nativeElement.getBoundingClientRect().height)\n        }\n    }\n}\n",
    "import { Component, HostBinding, Input } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node',\n    template: `<ng-template [ngIf]=\"!templates.treeNodeFullTemplate\">\n  <ngx-tree-node-wrapper [style.padding-left]=\"options.levelPadding(node)\"\n                         [node]=\"node\"\n                         [options]=\"options\"\n                         [index]=\"index\"\n                         [templates]=\"templates\"\n                         [class.tree-node-wrapper-active]=\"node.isActive\"\n                         [class.tree-node-wrapper-focused]=\"node.isFocused\"\n                         (click)=\"node.mouseAction('click', $event)\"\n                         (dblclick)=\"node.mouseAction('dblClick', $event)\"\n                         (contextmenu)=\"node.mouseAction('contextMenu', $event)\"\n                         (ngxTreeDrop)=\"node.onDrop($event)\"\n                         (treeDropDragOver)=\"node.mouseAction('dragOver', $event)\"\n                         (treeDropDragLeave)=\"node.mouseAction('dragLeave', $event)\"\n                         (treeDropDragEnter)=\"node.mouseAction('dragEnter', $event)\"\n                         [treeAllowDrop]=\"allowDrop\"\n                         [ngxTreeDrag]=\"node\"\n                         [treeDragEnabled]=\"allowDrag(node)\">\n  </ngx-tree-node-wrapper>\n\n  <ngx-tree-node-children *ngIf=\"node.isExpanded && node.hasVisibleChildren\"\n                          [node]=\"node\"\n                          [options]=\"options\"\n                          [children]=\"node.visibleChildren\"\n                          [templates]=\"templates\"></ngx-tree-node-children>\n</ng-template>\n\n<ng-container\n  [ngTemplateOutlet]=\"templates.treeNodeFullTemplate\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node, index: index, options: options, templates: templates }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;position:relative}`],\n})\nexport class TreeNodeComponent {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() index: number\n    @Input() templates: any\n\n    @HostBinding('class.tree-node') className = true\n\n    get allowDrop() {\n        return (node: TreeNode, $event?: DragEvent) => {\n            return isFunction(this.options.allowDrop)\n                ? this.options.allowDrop(node, { parent: this.node, index: node.index }, $event)\n                : this.options.allowDrop\n        }\n    }\n\n    allowDrag(node: TreeNode) {\n        return isFunction(this.options.allowDrag) ? this.options.allowDrag(node) : this.options.allowDrag\n    }\n}\n",
    "import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Renderer2,\n    SimpleChanges,\n} from '@angular/core'\nimport { merge, Subscription } from 'rxjs'\nimport { TREE_EVENTS } from '../../constants/events'\nimport { ScrollIntoViewTarget, TreeModel } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\n\nconst DISABLE_ON_SCROLL_CLASS = 'disable-events-on-scroll'\n\n@Component({\n    selector: 'ngx-tree-viewport',\n    template: `<ng-content></ng-content>\n`,\n    styles: [`:host{height:100%;overflow:auto;display:block}`],\n    providers: [TreeVirtualScroll],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeViewportComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n    lastScrollTop = 0\n    isScrolling = false\n\n    @Input() enable: boolean\n\n    @Input() treeModel: TreeModel\n\n    @HostBinding('class.tree-viewport') className = true\n\n    private ticking = false\n    private scrollIntoViewTicking = false\n    private lastScrollIntoViewTarget: ScrollIntoViewTarget\n    private structureChangeSub = Subscription.EMPTY\n    private scrollIntoViewSub = Subscription.EMPTY\n    private scrollTimer: number\n\n    constructor(public virtualScroll: TreeVirtualScroll, private elementRef: ElementRef, private renderer: Renderer2) {\n    }\n\n    @HostListener('scroll', ['$event'])\n    onScroll(event) {\n        this.disableEventsWhenScrolling()\n        if (this.virtualScroll.isDisabled()) {\n            return\n        }\n\n        const currentScrollTop = this.elementRef.nativeElement.scrollTop\n        if (Math.abs(currentScrollTop - this.lastScrollTop) < this.virtualScroll.averageNodeHeight) {\n            return false\n        }\n\n        this.lastScrollTop = currentScrollTop\n\n        if (!this.ticking) {\n            window.requestAnimationFrame(() => {\n                this.setViewport()\n                this.ticking = false\n            })\n            this.ticking = true\n        }\n\n        event.preventDefault()\n        event.stopPropagation()\n\n        return false\n    }\n\n    ngOnInit() {\n        this.scrollIntoViewSub = this.treeModel.scrollIntoView$.subscribe((target: ScrollIntoViewTarget) => {\n            if (target.node.elementRef) {\n                this.scrollIntoViewAndTick(target, () => {\n                    const lastTarget = this.lastScrollIntoViewTarget\n                    if (lastTarget.node.elementRef.nativeElement.scrollIntoViewIfNeeded) {\n                        lastTarget.node.elementRef.nativeElement.scrollIntoViewIfNeeded(lastTarget.scrollToMiddle)\n                    } else {\n                        lastTarget.node.elementRef.nativeElement.scrollIntoView({\n                            behavior: 'auto',\n                            block: 'end',\n                        })\n                    }\n                })\n            }\n        })\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if ('treeModel' in changes) {\n            this.virtualScroll.setDisabled(!this.enable)\n            if (this.virtualScroll.isDisabled()) {\n                if (!changes.treeModel.isFirstChange()) {\n                    this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n                }\n\n                return\n            }\n\n            this.initEventSubscription()\n            this.virtualScroll.reCalcPositions(this.treeModel)\n\n            if (!changes.treeModel.isFirstChange()) {\n                // use setTimeout to avoid do calculation on old data,\n                // let the new data render first round\n                setTimeout(() => {\n                    this.setViewport()\n                    this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n                })\n            }\n        }\n    }\n\n    ngAfterViewInit() {\n        setTimeout(() => {\n            if (this.virtualScroll.isDisabled()) {\n                this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n\n                return\n            }\n\n            this.virtualScroll.reCalcPositions(this.treeModel)\n            this.setViewport()\n            this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n        })\n    }\n\n    ngOnDestroy() {\n        if (this.structureChangeSub) {\n            this.structureChangeSub.unsubscribe()\n        }\n        if (this.scrollIntoViewSub) {\n            this.scrollIntoViewSub.unsubscribe()\n        }\n    }\n\n    scrollIntoViewAndTick(target: ScrollIntoViewTarget, scrollCallback: Function) {\n        this.lastScrollIntoViewTarget = target\n        if (!this.scrollIntoViewTicking) {\n            window.requestAnimationFrame(() => {\n                scrollCallback()\n                this.scrollIntoViewTicking = false\n            })\n            this.scrollIntoViewTicking = true\n        }\n    }\n\n    initEventSubscription() {\n        this.ngOnDestroy()\n        this.scrollIntoViewSub = this.treeModel.scrollIntoView$.subscribe((target: ScrollIntoViewTarget) => {\n            this.scrollIntoViewAndTick(target, () => {\n                const lastTarget = this.lastScrollIntoViewTarget\n                const targetOffset = this.virtualScroll.scrollIntoView(lastTarget.node, lastTarget.force, lastTarget.scrollToMiddle)\n\n                if (targetOffset) {\n                    this.elementRef.nativeElement.scrollTop = targetOffset\n                }\n            })\n        })\n\n        this.structureChangeSub = merge(\n            this.treeModel.events.expand,\n            this.treeModel.events.collapse,\n            this.treeModel.events.loadChildren,\n            this.treeModel.events.changeFilter,\n            this.treeModel.events.addNode,\n            this.treeModel.events.removeNode,\n        )\n            .subscribe(() => {\n                this.virtualScroll.reCalcPositions(this.treeModel)\n                this.setViewport()\n            })\n    }\n\n    setViewport() {\n        if (this.virtualScroll.isDisabled()) {\n            return\n        }\n\n        this.virtualScroll.adjustViewport(\n            this.elementRef.nativeElement.getBoundingClientRect(),\n            this.lastScrollTop,\n        )\n    }\n\n    private disableEventsWhenScrolling() {\n        if (this.scrollTimer) {\n            clearTimeout(this.scrollTimer)\n        } else {\n            this.isScrolling = true\n            this.renderer.addClass(this.elementRef.nativeElement, DISABLE_ON_SCROLL_CLASS)\n        }\n\n        this.scrollTimer = <any>setTimeout(() => {\n            this.isScrolling = false\n            this.renderer.removeClass(this.elementRef.nativeElement, DISABLE_ON_SCROLL_CLASS)\n\n            this.scrollTimer = null\n        }, 120)\n    }\n}\n",
    "import { Injectable } from '@angular/core'\nimport { Subject } from 'rxjs'\nimport { TreeNode } from '../models'\n\n@Injectable()\nexport class TreeDraggingTargetService extends Subject<TreeNode> {\n    _draggedElement: TreeNode = null\n\n    set (draggedElement: TreeNode) {\n        this._draggedElement = draggedElement\n    }\n\n    get () {\n        return this._draggedElement\n    }\n\n    isDragging() {\n        return !!this.get()\n    }\n}\n",
    "import {\n    Component,\n    ContentChild,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core'\nimport 'element-closest'\nimport each from 'lodash-es/each'\nimport { EventsMap, TREE_EVENTS } from '../../constants/events'\nimport {\n    createTreeUIOptions,\n    IAllowDragFn,\n    IAllowDropFn,\n    ILevelPaddingFn,\n    TreeDataOptions,\n    TreeModel,\n    TreeNode,\n    TreeUIOptions,\n} from '../../models'\nimport { TreeDraggingTargetService } from '../../services/tree-dragging-target.service'\nimport { TreeNodeChildrenComponent } from '../tree-node-children/tree-node-children.component'\nimport { TreeViewportComponent } from '../tree-viewport/tree-viewport.component'\n\n@Component({\n    selector: 'ngx-tree',\n    template: `<ngx-tree-viewport [@.disabled]=\"!enableAnimation || viewport.isScrolling\"\n                   [enable]=\"useVirtualScroll\"\n                   [treeModel]=\"treeModel\"\n                   #viewport>\n  <div *ngIf=\"!viewport.virtualScroll.isDisabled()\"\n       class=\"height-raiser\"\n       [style.height.px]=\"treeModel?.virtualRoot.height\"></div>\n  <div class=\"tree-root\"\n       [class.node-dragging]=\"treeDraggingTargetService.isDragging()\"\n       [class.virtual-scroll-disabled]=\"viewport.virtualScroll.isDisabled()\"\n       [style.transform]=\"'translateY(' + root.marginTop + 'px)'\">\n    <ngx-tree-node-children #root\n                            [options]=\"UIOptions\"\n                            [disableMarginTop]=\"true\"\n                            [node]=\"treeModel?.virtualRoot\"\n                            [children]=\"treeModel?.roots\"\n                            [refreshTree]=\"refreshTree\"\n                            [templates]=\"{\n                              expanderTemplate: expanderTemplate,\n                              loadingTemplate: loadingTemplate,\n                              treeNodeTemplate: treeNodeTemplate,\n                              treeNodeWrapperTemplate: treeNodeWrapperTemplate,\n                              treeNodeFullTemplate: treeNodeFullTemplate\n                            }\">\n    </ngx-tree-node-children>\n  </div>\n</ngx-tree-viewport>\n`,\n    styles: [`:host{display:block}ngx-tree-viewport{position:relative}ngx-tree-viewport.disable-events-on-scroll .tree-root /deep/ *{pointer-events:none}.tree-children{padding-left:20px}.height-raiser{-webkit-transition:height 250ms ease-in;transition:height 250ms ease-in}.tree-root{top:0;width:100%;height:100%;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-root.virtual-scroll-disabled{position:static}/deep/ .ngx-tree-dragging-target *{pointer-events:none}`],\n})\nexport class TreeComponent implements OnChanges, OnDestroy {\n    emitterMap: EventsMap\n    treeModel: TreeModel = null\n    UIOptions: TreeUIOptions\n    refreshTree = false\n\n    /**\n     * source data\n     */\n    @Input() nodes: TreeNode[]\n    /**\n     * id of the node to be focused on\n     */\n    @Input() focusTarget: string\n    /**\n     * id of the node to be activated\n     */\n    @Input() activateTarget: string\n    @Input() dataOptions: TreeDataOptions\n\n    @Input() allowDrag: boolean | IAllowDragFn\n    @Input() allowDrop: boolean | IAllowDropFn\n    @Input() levelPadding: number | ILevelPaddingFn\n    @Input() useVirtualScroll: boolean\n    @Input() nodeClass: (node: TreeNode) => string\n    @Input() enableAnimation = true\n    @Input() keepNodesExpanded = false\n\n    @Output() expand: EventEmitter<any> = null\n    @Output() collapse: EventEmitter<any> = null\n    @Output() toggleExpander: EventEmitter<any> = null\n    @Output() activate: EventEmitter<any> = null\n    @Output() deactivate: EventEmitter<any> = null\n    @Output() focus: EventEmitter<any> = null\n    @Output() blur: EventEmitter<any> = null\n    @Output() initialized: EventEmitter<any> = null\n    @Output() moveNode: EventEmitter<any> = null\n    @Output() loadChildren: EventEmitter<any> = null\n    @Output() changeFilter: EventEmitter<any> = null\n    @Output() addNode: EventEmitter<any> = null\n    @Output() removeNode: EventEmitter<any> = null\n\n    @HostBinding('class.ngx-tree') className = true\n\n    @ContentChild('loadingTemplate') loadingTemplate: TemplateRef<any>\n    @ContentChild('expanderTemplate') expanderTemplate: TemplateRef<any>\n    @ContentChild('treeNodeTemplate') treeNodeTemplate: TemplateRef<any>\n    @ContentChild('treeNodeWrapperTemplate') treeNodeWrapperTemplate: TemplateRef<any>\n    @ContentChild('treeNodeFullTemplate') treeNodeFullTemplate: TemplateRef<any>\n\n    @ViewChild('viewport') viewportComponent: TreeViewportComponent\n    @ViewChild('root') root: TreeNodeChildrenComponent\n\n    constructor(public treeDraggingTargetService: TreeDraggingTargetService) {\n        this.emitterMap = Object.keys(TREE_EVENTS).reduce((map, name) => {\n            if (!this.hasOwnProperty(name)) {\n                throw new TypeError(`Unmatched events: [${name}]`)\n            }\n\n            this[name] = map[name] = new EventEmitter()\n\n            return map\n        }, {}) as any\n\n        this.UIOptions = createTreeUIOptions()\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.nodes && changes.nodes.currentValue) {\n            const oldTreeModel = this.treeModel\n            this.treeModel = new TreeModel(changes.nodes.currentValue, this.emitterMap, this.dataOptions)\n            if (oldTreeModel && this.keepNodesExpanded) {\n                oldTreeModel.expandedNodes.forEach(node => {\n                    this.treeModel.setExpandedNodeInPlace(node)\n                })\n            }\n            if (!changes.nodes.isFirstChange()) {\n                this.refreshTree = true\n            }\n        } else if (changes.dataOptions && changes.dataOptions.currentValue && this.treeModel) {\n            this.treeModel.updateOptions(changes.dataOptions.currentValue)\n        }\n\n        if (changes.focusTarget && changes.focusTarget.currentValue && this.treeModel) {\n            this.treeModel.focusNode(this.focusTarget)\n        }\n\n        if (changes.activateTarget && changes.activateTarget.currentValue && this.treeModel) {\n            this.treeModel.activateNode(this.activateTarget)\n        }\n\n        if (changes.allowDrag\n            || changes.allowDrop\n            || changes.levelPadding\n            || changes.useVirtualScroll\n            || changes.nodeClass) {\n            this.UIOptions = createTreeUIOptions({\n                allowDrag: this.allowDrag,\n                allowDrop: this.allowDrop,\n                levelPadding: this.levelPadding,\n                useVirtualScroll: this.useVirtualScroll,\n                nodeClass: this.nodeClass,\n            })\n        }\n    }\n\n    ngOnDestroy() {\n        each(this.emitterMap, function (emitter) {\n            emitter.complete()\n        })\n    }\n\n    @HostListener('body: keydown', ['$event'])\n    onKeydown($event) {\n        if (!this.treeModel.isFocused) {\n            return\n        }\n\n        if (['input', 'textarea'].includes(document.activeElement.tagName.toLowerCase())) {\n            return\n        }\n\n        const focusedNode = this.treeModel.focusedNode\n\n        this.treeModel.performKeyAction(focusedNode, $event)\n    }\n\n    @HostListener('body: mousedown', ['$event'])\n    onMousedown($event) {\n        const insideClick = $event.target.closest('ngx-tree')\n\n        if (!insideClick) {\n            this.treeModel.setFocus(false)\n        }\n    }\n\n    sizeChanged() {\n        this.viewportComponent.setViewport()\n    }\n\n}\n",
    "import { Directive, ElementRef, HostListener, Input, OnChanges, Renderer2 } from '@angular/core'\nimport { TreeNode } from '../models'\nimport { TreeDraggingTargetService } from '../services/tree-dragging-target.service'\n\nconst DRAGGING_TARGET_CLASS = 'ngx-tree-dragging-target'\n\n@Directive({\n    selector: '[ngxTreeDrag]',\n})\nexport class TreeDragDirective implements OnChanges {\n    @Input('ngxTreeDrag') draggingTarget: TreeNode\n    @Input() treeDragEnabled: boolean\n\n    constructor(\n        private el: ElementRef,\n        private renderer: Renderer2,\n        private treeDraggingTargetService: TreeDraggingTargetService,\n    ) {\n    }\n\n    @HostListener('dragstart', ['$event'])\n    onDragStart(ev) {\n        // setting the data is required by firefox\n        ev.dataTransfer.setData('text', this.draggingTarget.id)\n        ev.dataTransfer.dropEffect = 'move'\n        this.renderer.addClass(this.el.nativeElement, DRAGGING_TARGET_CLASS)\n\n        this.treeDraggingTargetService.set(this.draggingTarget)\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('dragStart', ev)\n        }\n    }\n\n    /*@HostListener('drag', ['$event'])\n    onDrag(ev) {\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('drag', ev)\n        }\n\n        console.log('drag')\n    }*/\n\n    @HostListener('dragend', ['$event'])\n    onDragEnd(event) {\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('dragEnd', event)\n        }\n\n        this.renderer.removeClass(this.el.nativeElement, DRAGGING_TARGET_CLASS)\n\n        this.treeDraggingTargetService.set(null)\n    }\n\n    ngOnChanges(changes) {\n        if ('treeDragEnabled' in changes) {\n            this.renderer.setAttribute(this.el.nativeElement, 'draggable', this.treeDragEnabled ? 'true' : 'false')\n        }\n    }\n}\n",
    "import { Directive, ElementRef, EventEmitter, HostListener, Input, OnDestroy, Output, Renderer2 } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode } from '../models'\nimport { TreeDraggingTargetService } from '../services/tree-dragging-target.service'\n\nconst DRAG_OVER_CLASS = 'is-dragging-over'\nconst DRAG_DISABLED_CLASS = 'is-dragging-over-disabled'\n\nexport type AllowDropPredicate = (element: TreeNode, $event: MouseEvent) => boolean\n\n@Directive({\n    selector: '[ngxTreeDrop]',\n})\nexport class TreeDropDirective implements OnDestroy {\n    @Output('ngxTreeDrop') onDrop$ = new EventEmitter()\n    @Output('treeDropDragOver') onDragOver$ = new EventEmitter()\n    @Output('treeDropDragLeave') onDragLeave$ = new EventEmitter()\n    @Output('treeDropDragEnter') onDragEnter$ = new EventEmitter()\n\n    @Input()\n    set treeAllowDrop(allowDrop: boolean | AllowDropPredicate) {\n        this._allowDrop = isFunction(allowDrop) ? allowDrop : (element, $event) => allowDrop\n    }\n\n    get treeAllowDrop() {\n        return this._allowDrop\n    }\n\n    private dragOverClassAdded: boolean\n    private disabledClassAdded: boolean\n\n    constructor(\n        private el: ElementRef,\n        private renderer: Renderer2,\n        private treeDraggedElement: TreeDraggingTargetService,\n    ) {\n    }\n\n    ngOnDestroy() {\n        this.onDrop$.complete()\n        this.onDragEnter$.complete()\n        this.onDragLeave$.complete()\n        this.onDragOver$.complete()\n    }\n\n    @HostListener('dragover', ['$event'])\n    onDragOver($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            return\n        }\n\n        this.onDragOver$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        if (!this.dragOverClassAdded) {\n            this.addClass()\n        }\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('dragenter', ['$event'])\n    onDragEnter($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            this.addDisabledClass()\n\n            return\n        }\n        this.addClass()\n\n        this.onDragEnter$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('dragleave', ['$event'])\n    onDragLeave($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            this.removeDisabledClass()\n\n            return\n        }\n        this.removeClass()\n\n        this.onDragLeave$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('drop', ['$event'])\n    onDrop($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            return\n        }\n        this.removeClass()\n\n        this.onDrop$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this.treeDraggedElement.set(null)\n\n        this._stopEvent($event)\n    }\n\n    allowDrop($event) {\n        return this._allowDrop(this.treeDraggedElement.get(), $event)\n    }\n\n    private _stopEvent(event: Event): void {\n        event.preventDefault()\n        event.stopPropagation()\n    }\n\n    private _allowDrop: AllowDropPredicate = (element, $event) => true\n\n    private addClass() {\n        this.dragOverClassAdded = true\n        this.renderer.addClass(this.el.nativeElement, DRAG_OVER_CLASS)\n    }\n\n    private removeClass() {\n        this.dragOverClassAdded = false\n        this.renderer.removeClass(this.el.nativeElement, DRAG_OVER_CLASS)\n    }\n\n    private addDisabledClass() {\n        this.disabledClassAdded = true\n        this.renderer.addClass(this.el.nativeElement, DRAG_DISABLED_CLASS)\n    }\n\n    private removeDisabledClass() {\n        this.disabledClassAdded = false\n        this.renderer.removeClass(this.el.nativeElement, DRAG_DISABLED_CLASS)\n    }\n}\n",
    "import { CommonModule } from '@angular/common'\nimport { ModuleWithProviders, NgModule } from '@angular/core'\n\nimport { TreeLoadingComponent } from './components/tree-loading/tree-loading.component'\nimport { TreeNodeChildrenComponent } from './components/tree-node-children/tree-node-children.component'\nimport { TreeNodeContentComponent } from './components/tree-node-content/tree-node-content.component'\nimport { TreeNodeDropSlotComponent } from './components/tree-node-drop-slot/tree-node-drop-slot.component'\nimport { TreeNodeExpanderComponent } from './components/tree-node-expander/tree-node-expander.component'\nimport { TreeNodeWrapperComponent } from './components/tree-node-wrapper/tree-node-wrapper.component'\nimport { TreeNodeComponent } from './components/tree-node/tree-node.component'\nimport { TreeViewportComponent } from './components/tree-viewport/tree-viewport.component'\nimport { TreeComponent } from './components/tree/tree.component'\nimport { TreeDragDirective } from './directives/tree-drag.directive'\nimport { TreeDropDirective } from './directives/tree-drop.directive'\nimport { TreeDraggingTargetService } from './services/tree-dragging-target.service'\nimport { TreeVirtualScroll, VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA } from './services/tree-virtual-scroll.service'\n\n@NgModule({\n    imports: [\n        CommonModule,\n    ],\n    declarations: [\n        TreeLoadingComponent,\n        TreeNodeComponent,\n        TreeComponent,\n        TreeNodeExpanderComponent,\n        TreeNodeWrapperComponent,\n        TreeNodeChildrenComponent,\n        TreeNodeContentComponent,\n        TreeViewportComponent,\n        TreeNodeDropSlotComponent,\n        TreeDragDirective,\n        TreeDropDirective,\n    ],\n    exports: [\n        TreeLoadingComponent,\n        TreeNodeComponent,\n        TreeComponent,\n        TreeNodeExpanderComponent,\n        TreeNodeWrapperComponent,\n        TreeNodeChildrenComponent,\n        TreeNodeContentComponent,\n        TreeViewportComponent,\n        TreeNodeDropSlotComponent,\n        TreeDragDirective,\n        TreeDropDirective,\n    ],\n})\nexport class NgxTreeModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: NgxTreeModule,\n            providers: [\n                TreeDraggingTargetService,\n                {\n                    provide: VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA,\n                    useValue: 5,\n                },\n            ],\n        }\n    }\n}\n\nexport {\n    TreeLoadingComponent,\n    TreeNodeChildrenComponent,\n    TreeNodeContentComponent,\n    TreeNodeDropSlotComponent,\n    TreeNodeExpanderComponent,\n    TreeNodeWrapperComponent,\n    TreeNodeComponent,\n    TreeViewportComponent,\n    TreeComponent,\n    TreeDragDirective,\n    TreeDropDirective,\n    TreeDraggingTargetService,\n    TreeVirtualScroll,\n    VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA\n}\n\nexport * from './models/index'\nexport * from './constants/events'\nexport * from './constants/keys'\n"
  ],
  "names": [
    "extendStatics",
    "Object",
    "setPrototypeOf",
    "__proto__",
    "Array",
    "d",
    "b",
    "p",
    "hasOwnProperty",
    "__read",
    "o",
    "n",
    "m",
    "Symbol",
    "iterator",
    "r",
    "e",
    "i",
    "call",
    "ar",
    "next",
    "done",
    "push",
    "value",
    "error",
    "__spread",
    "arguments",
    "length",
    "concat",
    "NUMBER_KEYS",
    "LEFT",
    "UP",
    "RIGHT",
    "DOWN",
    "ENTER",
    "SPACE",
    "TREE_ACTIONS",
    "TOGGLE_SELECTED",
    "tree",
    "node",
    "$event",
    "toggleActivated",
    "TOGGLE_SELECTED_MULTI",
    "SELECT",
    "setActive",
    "DESELECT",
    "FOCUS",
    "focus",
    "TOGGLE_EXPANDED",
    "stopPropagation",
    "hasChildren",
    "toggleExpanded",
    "EXPAND",
    "expand",
    "COLLAPSE",
    "collapse",
    "DRILL_DOWN",
    "focusDrillDown",
    "DRILL_UP",
    "focusDrillUp",
    "NEXT_NODE",
    "focusNextNode",
    "PREVIOUS_NODE",
    "focusPreviousNode",
    "MOVE_NODE",
    "_a",
    "from",
    "to",
    "moveNode",
    "defaultActionMapping",
    "mouse",
    "click",
    "dblClick",
    "contextMenu",
    "expanderClick",
    "drop",
    "keys",
    "defaultUIOptions",
    "allowDrag",
    "allowDrop",
    "levelPadding",
    "useVirtualScroll",
    "nodeClass",
    "defaultDataOptions",
    "childrenField",
    "displayField",
    "idField",
    "isExpandedField",
    "actionMapping",
    "getChildren",
    "createTreeUIOptions",
    "rawOpts",
    "levelPaddingOpt",
    "isNumber",
    "level",
    "defaults",
    "createTreeDataOptions",
    "defaultsDeep",
    "TREE_EVENTS",
    "toggleExpander",
    "activate",
    "deactivate",
    "blur",
    "initialized",
    "loadChildren",
    "changeFilter",
    "removeNode",
    "addNode",
    "TreeNode",
    "data",
    "parent",
    "treeModel",
    "index",
    "this",
    "position",
    "height",
    "loadingChildren",
    "id",
    "undefined",
    "_uuid",
    "addCache",
    "options",
    "setExpandedNodeInPlace",
    "getField",
    "initChildren",
    "defineProperty",
    "prototype",
    "get",
    "isNodeHidden",
    "isNodeExpanded",
    "isExpanded",
    "isNodeActive",
    "isNodeFocused",
    "path",
    "children",
    "visibleChildren",
    "set",
    "setField",
    "filter",
    "isHidden",
    "fireEvent",
    "event",
    "key",
    "onDrop",
    "mouseAction",
    "element",
    "dropOnNode",
    "findAdjacentSibling",
    "steps",
    "skipHidden",
    "getParentChildren",
    "findNextSibling",
    "findPreviousSibling",
    "getFirstChild",
    "first",
    "getLastChild",
    "last",
    "findNextNode",
    "goInside",
    "findPreviousNode",
    "previousSibling",
    "getLastOpenDescendant",
    "isDescendantOf",
    "_this",
    "Promise",
    "resolve",
    "then",
    "eventName",
    "traverse",
    "fn",
    "forEach",
    "child",
    "expandAll",
    "collapseAll",
    "setExpandedNode",
    "isActive",
    "isMulti",
    "setActiveNode",
    "setHidden",
    "setHiddenNode",
    "setActiveAndVisible",
    "ensureVisible",
    "scrollIntoView",
    "force",
    "scrollToMiddle",
    "scroll",
    "previousNode",
    "focusedNode",
    "setFocusedNode",
    "hide",
    "show",
    "addChild",
    "splice",
    "slice",
    "reCalcChildrenIndices",
    "appendChild",
    "remove",
    "removeChild",
    "pullAt",
    "without",
    "isFocused",
    "elementRef",
    "actionName",
    "setFocus",
    "action",
    "offset",
    "map",
    "lastChild",
    "isCollapsed",
    "TreeModel",
    "nodes",
    "events",
    "scrollIntoView$",
    "Subject",
    "focusedNodeId",
    "expandedNodeIds",
    "Map",
    "activeNodeIds",
    "hiddenNodeIds",
    "nodeCache",
    "virtualRootConfig",
    "virtual",
    "virtualRoot",
    "roots",
    "focusedTree",
    "getNodeById",
    "compact",
    "updateOptions",
    "emit",
    "subscribe",
    "getActiveNode",
    "activeNodes",
    "getVisibleRoots",
    "getFirstRoot",
    "getLastRoot",
    "getNodeByPath",
    "startNode",
    "childId",
    "shift",
    "childNode",
    "find",
    "getNodeBy",
    "predicate",
    "found",
    "tslib_1.__values",
    "_b",
    "foundInChildren",
    "setMultiActiveNodes",
    "setSingleActiveNode",
    "root",
    "activateNode",
    "target",
    "focusNode",
    "nextNode",
    "performKeyAction",
    "keyCode",
    "preventDefault",
    "filterNodes",
    "autoShow",
    "filterFn",
    "clearFilter",
    "isString",
    "toLowerCase",
    "includes",
    "isFunction",
    "TypeError",
    "ids",
    "filterNode",
    "fromIndex",
    "fromParent",
    "canMoveNode",
    "toIndex",
    "autoExpand",
    "isVisible",
    "active",
    "activeNode",
    "TreeLoadingComponent",
    "className",
    "type",
    "Component",
    "args",
    "selector",
    "template",
    "styles",
    "changeDetection",
    "ChangeDetectionStrategy",
    "OnPush",
    "Input",
    "HostBinding",
    "VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA",
    "InjectionToken",
    "TreeVirtualScroll",
    "quota",
    "averageNodeHeight",
    "hasEnoughNodeHeight",
    "lastScrollTop",
    "disabled",
    "collectionMonitor$",
    "BehaviorSubject",
    "nodeHeightAnalytics$",
    "collectAverageNodeHeight",
    "adjustViewport",
    "viewport",
    "scrollTop",
    "currentViewport",
    "Y_OFFSET",
    "startPos",
    "endPos",
    "waitForCollection",
    "observer",
    "pipe",
    "val",
    "reportNodeHeight",
    "reCalcPositions",
    "getPositionAfter",
    "setDisabled",
    "isDisabled",
    "getPositionAfterNode",
    "isPrevShadow",
    "scan",
    "acc",
    "cur",
    "lastAvg",
    "sum",
    "count",
    "avg",
    "pair",
    "binarySearch",
    "condition",
    "firstIndex",
    "left",
    "right",
    "mid",
    "Math",
    "floor",
    "Injectable",
    "decorators",
    "Inject",
    "EXPANSION_PANEL_ANIMATION_TIMING",
    "TreeNodeChildrenComponent",
    "virtualScroll",
    "marginTop",
    "viewportNodes",
    "disableMarginTop",
    "refreshTree",
    "expandAnimation",
    "scrollSub",
    "Subscription",
    "EMPTY",
    "ngOnInit",
    "metrics",
    "getViewportNodes",
    "calcMarginTop",
    "ngOnChanges",
    "changes",
    "currentValue",
    "ngOnDestroy",
    "unsubscribe",
    "trackNode",
    "firstNode",
    "max",
    "isRoot",
    "lastIndex",
    "animations",
    "trigger",
    "transition",
    "style",
    "overflow",
    "animate",
    "templates",
    "noPadding",
    "marginTopAttr",
    "TreeNodeContentComponent",
    "TreeNodeDropSlotComponent",
    "dropIndex",
    "TreeNodeExpanderComponent",
    "TreeNodeWrapperComponent",
    "ngAfterViewInit",
    "nativeElement",
    "getBoundingClientRect",
    "ElementRef",
    "TreeNodeComponent",
    "DISABLE_ON_SCROLL_CLASS",
    "TreeViewportComponent",
    "renderer",
    "isScrolling",
    "ticking",
    "scrollIntoViewTicking",
    "structureChangeSub",
    "scrollIntoViewSub",
    "onScroll",
    "disableEventsWhenScrolling",
    "currentScrollTop",
    "abs",
    "window",
    "requestAnimationFrame",
    "setViewport",
    "scrollIntoViewAndTick",
    "lastTarget",
    "lastScrollIntoViewTarget",
    "scrollIntoViewIfNeeded",
    "behavior",
    "block",
    "enable",
    "isFirstChange",
    "initEventSubscription",
    "setTimeout",
    "scrollCallback",
    "targetOffset",
    "merge",
    "scrollTimer",
    "clearTimeout",
    "addClass",
    "removeClass",
    "providers",
    "Renderer2",
    "HostListener",
    "TreeDraggingTargetService",
    "_super",
    "_draggedElement",
    "__",
    "constructor",
    "create",
    "tslib_1.__extends",
    "draggedElement",
    "isDragging",
    "TreeComponent",
    "treeDraggingTargetService",
    "enableAnimation",
    "keepNodesExpanded",
    "emitterMap",
    "reduce",
    "name",
    "EventEmitter",
    "UIOptions",
    "oldTreeModel",
    "dataOptions",
    "expandedNodes",
    "focusTarget",
    "activateTarget",
    "each",
    "emitter",
    "complete",
    "onKeydown",
    "document",
    "activeElement",
    "tagName",
    "onMousedown",
    "closest",
    "sizeChanged",
    "viewportComponent",
    "Output",
    "loadingTemplate",
    "ContentChild",
    "expanderTemplate",
    "treeNodeTemplate",
    "treeNodeWrapperTemplate",
    "treeNodeFullTemplate",
    "ViewChild",
    "DRAGGING_TARGET_CLASS",
    "TreeDragDirective",
    "el",
    "onDragStart",
    "ev",
    "dataTransfer",
    "setData",
    "draggingTarget",
    "dropEffect",
    "onDragEnd",
    "setAttribute",
    "treeDragEnabled",
    "Directive",
    "DRAG_OVER_CLASS",
    "DRAG_DISABLED_CLASS",
    "TreeDropDirective",
    "treeDraggedElement",
    "onDrop$",
    "onDragOver$",
    "onDragLeave$",
    "onDragEnter$",
    "_allowDrop",
    "onDragOver",
    "dragOverClassAdded",
    "_stopEvent",
    "onDragEnter",
    "addDisabledClass",
    "onDragLeave",
    "removeDisabledClass",
    "disabledClassAdded",
    "treeAllowDrop",
    "NgxTreeModule",
    "forRoot",
    "ngModule",
    "provide",
    "useValue",
    "NgModule",
    "imports",
    "CommonModule",
    "declarations",
    "exports"
  ],
  "mappings": "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"
}
