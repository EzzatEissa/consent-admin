{
  "version": 3,
  "file": "e-cloud-ngx-tree.js",
  "sources": [
    "ng://@e-cloud/ngx-tree/out/index.ts",
    "ng://@e-cloud/ngx-tree/out/directives/tree-drop.directive.ts",
    "ng://@e-cloud/ngx-tree/out/directives/tree-drag.directive.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree/tree.component.ts",
    "ng://@e-cloud/ngx-tree/out/services/tree-dragging-target.service.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-viewport/tree-viewport.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node/tree-node.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-wrapper/tree-node-wrapper.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-expander/tree-node-expander.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-drop-slot/tree-node-drop-slot.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-content/tree-node-content.component.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-node-children/tree-node-children.component.ts",
    "ng://@e-cloud/ngx-tree/out/util.ts",
    "ng://@e-cloud/ngx-tree/out/services/tree-virtual-scroll.service.ts",
    "ng://@e-cloud/ngx-tree/out/components/tree-loading/tree-loading.component.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-model.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-node.ts",
    "ng://@e-cloud/ngx-tree/out/constants/events.ts",
    "ng://@e-cloud/ngx-tree/out/models/tree-options.ts",
    "ng://@e-cloud/ngx-tree/out/models/actions.ts",
    "ng://@e-cloud/ngx-tree/out/constants/keys.ts"
  ],
  "sourcesContent": [
    "import { CommonModule } from '@angular/common'\nimport { ModuleWithProviders, NgModule } from '@angular/core'\n\nimport { TreeLoadingComponent } from './components/tree-loading/tree-loading.component'\nimport { TreeNodeChildrenComponent } from './components/tree-node-children/tree-node-children.component'\nimport { TreeNodeContentComponent } from './components/tree-node-content/tree-node-content.component'\nimport { TreeNodeDropSlotComponent } from './components/tree-node-drop-slot/tree-node-drop-slot.component'\nimport { TreeNodeExpanderComponent } from './components/tree-node-expander/tree-node-expander.component'\nimport { TreeNodeWrapperComponent } from './components/tree-node-wrapper/tree-node-wrapper.component'\nimport { TreeNodeComponent } from './components/tree-node/tree-node.component'\nimport { TreeViewportComponent } from './components/tree-viewport/tree-viewport.component'\nimport { TreeComponent } from './components/tree/tree.component'\nimport { TreeDragDirective } from './directives/tree-drag.directive'\nimport { TreeDropDirective } from './directives/tree-drop.directive'\nimport { TreeDraggingTargetService } from './services/tree-dragging-target.service'\nimport { TreeVirtualScroll, VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA } from './services/tree-virtual-scroll.service'\n\n@NgModule({\n    imports: [\n        CommonModule,\n    ],\n    declarations: [\n        TreeLoadingComponent,\n        TreeNodeComponent,\n        TreeComponent,\n        TreeNodeExpanderComponent,\n        TreeNodeWrapperComponent,\n        TreeNodeChildrenComponent,\n        TreeNodeContentComponent,\n        TreeViewportComponent,\n        TreeNodeDropSlotComponent,\n        TreeDragDirective,\n        TreeDropDirective,\n    ],\n    exports: [\n        TreeLoadingComponent,\n        TreeNodeComponent,\n        TreeComponent,\n        TreeNodeExpanderComponent,\n        TreeNodeWrapperComponent,\n        TreeNodeChildrenComponent,\n        TreeNodeContentComponent,\n        TreeViewportComponent,\n        TreeNodeDropSlotComponent,\n        TreeDragDirective,\n        TreeDropDirective,\n    ],\n})\nexport class NgxTreeModule {\n    static forRoot(): ModuleWithProviders {\n        return {\n            ngModule: NgxTreeModule,\n            providers: [\n                TreeDraggingTargetService,\n                {\n                    provide: VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA,\n                    useValue: 5,\n                },\n            ],\n        }\n    }\n}\n\nexport {\n    TreeLoadingComponent,\n    TreeNodeChildrenComponent,\n    TreeNodeContentComponent,\n    TreeNodeDropSlotComponent,\n    TreeNodeExpanderComponent,\n    TreeNodeWrapperComponent,\n    TreeNodeComponent,\n    TreeViewportComponent,\n    TreeComponent,\n    TreeDragDirective,\n    TreeDropDirective,\n    TreeDraggingTargetService,\n    TreeVirtualScroll,\n    VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA\n}\n\nexport * from './models/index'\nexport * from './constants/events'\nexport * from './constants/keys'\n",
    "import { Directive, ElementRef, EventEmitter, HostListener, Input, OnDestroy, Output, Renderer2 } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode } from '../models'\nimport { TreeDraggingTargetService } from '../services/tree-dragging-target.service'\n\nconst DRAG_OVER_CLASS = 'is-dragging-over'\nconst DRAG_DISABLED_CLASS = 'is-dragging-over-disabled'\n\nexport type AllowDropPredicate = (element: TreeNode, $event: MouseEvent) => boolean\n\n@Directive({\n    selector: '[ngxTreeDrop]',\n})\nexport class TreeDropDirective implements OnDestroy {\n    @Output('ngxTreeDrop') onDrop$ = new EventEmitter()\n    @Output('treeDropDragOver') onDragOver$ = new EventEmitter()\n    @Output('treeDropDragLeave') onDragLeave$ = new EventEmitter()\n    @Output('treeDropDragEnter') onDragEnter$ = new EventEmitter()\n\n    @Input()\n    set treeAllowDrop(allowDrop: boolean | AllowDropPredicate) {\n        this._allowDrop = isFunction(allowDrop) ? allowDrop : (element, $event) => allowDrop\n    }\n\n    get treeAllowDrop() {\n        return this._allowDrop\n    }\n\n    private dragOverClassAdded: boolean\n    private disabledClassAdded: boolean\n\n    constructor(\n        private el: ElementRef,\n        private renderer: Renderer2,\n        private treeDraggedElement: TreeDraggingTargetService,\n    ) {\n    }\n\n    ngOnDestroy() {\n        this.onDrop$.complete()\n        this.onDragEnter$.complete()\n        this.onDragLeave$.complete()\n        this.onDragOver$.complete()\n    }\n\n    @HostListener('dragover', ['$event'])\n    onDragOver($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            return\n        }\n\n        this.onDragOver$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        if (!this.dragOverClassAdded) {\n            this.addClass()\n        }\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('dragenter', ['$event'])\n    onDragEnter($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            this.addDisabledClass()\n\n            return\n        }\n        this.addClass()\n\n        this.onDragEnter$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('dragleave', ['$event'])\n    onDragLeave($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            this.removeDisabledClass()\n\n            return\n        }\n        this.removeClass()\n\n        this.onDragLeave$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this._stopEvent(event)\n    }\n\n    @HostListener('drop', ['$event'])\n    onDrop($event: DragEvent) {\n        if (!this.allowDrop($event)) {\n            return\n        }\n        this.removeClass()\n\n        this.onDrop$.emit({ event: $event, element: this.treeDraggedElement.get() })\n\n        this.treeDraggedElement.set(null)\n\n        this._stopEvent($event)\n    }\n\n    allowDrop($event) {\n        return this._allowDrop(this.treeDraggedElement.get(), $event)\n    }\n\n    private _stopEvent(event: Event): void {\n        event.preventDefault()\n        event.stopPropagation()\n    }\n\n    private _allowDrop: AllowDropPredicate = (element, $event) => true\n\n    private addClass() {\n        this.dragOverClassAdded = true\n        this.renderer.addClass(this.el.nativeElement, DRAG_OVER_CLASS)\n    }\n\n    private removeClass() {\n        this.dragOverClassAdded = false\n        this.renderer.removeClass(this.el.nativeElement, DRAG_OVER_CLASS)\n    }\n\n    private addDisabledClass() {\n        this.disabledClassAdded = true\n        this.renderer.addClass(this.el.nativeElement, DRAG_DISABLED_CLASS)\n    }\n\n    private removeDisabledClass() {\n        this.disabledClassAdded = false\n        this.renderer.removeClass(this.el.nativeElement, DRAG_DISABLED_CLASS)\n    }\n}\n",
    "import { Directive, ElementRef, HostListener, Input, OnChanges, Renderer2 } from '@angular/core'\nimport { TreeNode } from '../models'\nimport { TreeDraggingTargetService } from '../services/tree-dragging-target.service'\n\nconst DRAGGING_TARGET_CLASS = 'ngx-tree-dragging-target'\n\n@Directive({\n    selector: '[ngxTreeDrag]',\n})\nexport class TreeDragDirective implements OnChanges {\n    @Input('ngxTreeDrag') draggingTarget: TreeNode\n    @Input() treeDragEnabled: boolean\n\n    constructor(\n        private el: ElementRef,\n        private renderer: Renderer2,\n        private treeDraggingTargetService: TreeDraggingTargetService,\n    ) {\n    }\n\n    @HostListener('dragstart', ['$event'])\n    onDragStart(ev) {\n        // setting the data is required by firefox\n        ev.dataTransfer.setData('text', this.draggingTarget.id)\n        ev.dataTransfer.dropEffect = 'move'\n        this.renderer.addClass(this.el.nativeElement, DRAGGING_TARGET_CLASS)\n\n        this.treeDraggingTargetService.set(this.draggingTarget)\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('dragStart', ev)\n        }\n    }\n\n    /*@HostListener('drag', ['$event'])\n    onDrag(ev) {\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('drag', ev)\n        }\n\n        console.log('drag')\n    }*/\n\n    @HostListener('dragend', ['$event'])\n    onDragEnd(event) {\n        if (this.draggingTarget.mouseAction) {\n            this.draggingTarget.mouseAction('dragEnd', event)\n        }\n\n        this.renderer.removeClass(this.el.nativeElement, DRAGGING_TARGET_CLASS)\n\n        this.treeDraggingTargetService.set(null)\n    }\n\n    ngOnChanges(changes) {\n        if ('treeDragEnabled' in changes) {\n            this.renderer.setAttribute(this.el.nativeElement, 'draggable', this.treeDragEnabled ? 'true' : 'false')\n        }\n    }\n}\n",
    "import {\n    Component,\n    ContentChild,\n    EventEmitter,\n    HostBinding,\n    HostListener,\n    Input,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    TemplateRef,\n    ViewChild,\n} from '@angular/core'\nimport 'element-closest'\nimport each from 'lodash-es/each'\nimport { EventsMap, TREE_EVENTS } from '../../constants/events'\nimport {\n    createTreeUIOptions,\n    IAllowDragFn,\n    IAllowDropFn,\n    ILevelPaddingFn,\n    TreeDataOptions,\n    TreeModel,\n    TreeNode,\n    TreeUIOptions,\n} from '../../models'\nimport { TreeDraggingTargetService } from '../../services/tree-dragging-target.service'\nimport { TreeNodeChildrenComponent } from '../tree-node-children/tree-node-children.component'\nimport { TreeViewportComponent } from '../tree-viewport/tree-viewport.component'\n\n@Component({\n    selector: 'ngx-tree',\n    template: `<ngx-tree-viewport [@.disabled]=\"!enableAnimation || viewport.isScrolling\"\n                   [enable]=\"useVirtualScroll\"\n                   [treeModel]=\"treeModel\"\n                   #viewport>\n  <div *ngIf=\"!viewport.virtualScroll.isDisabled()\"\n       class=\"height-raiser\"\n       [style.height.px]=\"treeModel?.virtualRoot.height\"></div>\n  <div class=\"tree-root\"\n       [class.node-dragging]=\"treeDraggingTargetService.isDragging()\"\n       [class.virtual-scroll-disabled]=\"viewport.virtualScroll.isDisabled()\"\n       [style.transform]=\"'translateY(' + root.marginTop + 'px)'\">\n    <ngx-tree-node-children #root\n                            [options]=\"UIOptions\"\n                            [disableMarginTop]=\"true\"\n                            [node]=\"treeModel?.virtualRoot\"\n                            [children]=\"treeModel?.roots\"\n                            [refreshTree]=\"refreshTree\"\n                            [templates]=\"{\n                              expanderTemplate: expanderTemplate,\n                              loadingTemplate: loadingTemplate,\n                              treeNodeTemplate: treeNodeTemplate,\n                              treeNodeWrapperTemplate: treeNodeWrapperTemplate,\n                              treeNodeFullTemplate: treeNodeFullTemplate\n                            }\">\n    </ngx-tree-node-children>\n  </div>\n</ngx-tree-viewport>\n`,\n    styles: [`:host{display:block}ngx-tree-viewport{position:relative}ngx-tree-viewport.disable-events-on-scroll .tree-root /deep/ *{pointer-events:none}.tree-children{padding-left:20px}.height-raiser{-webkit-transition:height 250ms ease-in;transition:height 250ms ease-in}.tree-root{top:0;width:100%;height:100%;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-root.virtual-scroll-disabled{position:static}/deep/ .ngx-tree-dragging-target *{pointer-events:none}`],\n})\nexport class TreeComponent implements OnChanges, OnDestroy {\n    emitterMap: EventsMap\n    treeModel: TreeModel = null\n    UIOptions: TreeUIOptions\n    refreshTree = false\n\n    /**\n     * source data\n     */\n    @Input() nodes: TreeNode[]\n    /**\n     * id of the node to be focused on\n     */\n    @Input() focusTarget: string\n    /**\n     * id of the node to be activated\n     */\n    @Input() activateTarget: string\n    @Input() dataOptions: TreeDataOptions\n\n    @Input() allowDrag: boolean | IAllowDragFn\n    @Input() allowDrop: boolean | IAllowDropFn\n    @Input() levelPadding: number | ILevelPaddingFn\n    @Input() useVirtualScroll: boolean\n    @Input() nodeClass: (node: TreeNode) => string\n    @Input() enableAnimation = true\n    @Input() keepNodesExpanded = false\n\n    @Output() expand: EventEmitter<any> = null\n    @Output() collapse: EventEmitter<any> = null\n    @Output() toggleExpander: EventEmitter<any> = null\n    @Output() activate: EventEmitter<any> = null\n    @Output() deactivate: EventEmitter<any> = null\n    @Output() focus: EventEmitter<any> = null\n    @Output() blur: EventEmitter<any> = null\n    @Output() initialized: EventEmitter<any> = null\n    @Output() moveNode: EventEmitter<any> = null\n    @Output() loadChildren: EventEmitter<any> = null\n    @Output() changeFilter: EventEmitter<any> = null\n    @Output() addNode: EventEmitter<any> = null\n    @Output() removeNode: EventEmitter<any> = null\n\n    @HostBinding('class.ngx-tree') className = true\n\n    @ContentChild('loadingTemplate') loadingTemplate: TemplateRef<any>\n    @ContentChild('expanderTemplate') expanderTemplate: TemplateRef<any>\n    @ContentChild('treeNodeTemplate') treeNodeTemplate: TemplateRef<any>\n    @ContentChild('treeNodeWrapperTemplate') treeNodeWrapperTemplate: TemplateRef<any>\n    @ContentChild('treeNodeFullTemplate') treeNodeFullTemplate: TemplateRef<any>\n\n    @ViewChild('viewport') viewportComponent: TreeViewportComponent\n    @ViewChild('root') root: TreeNodeChildrenComponent\n\n    constructor(public treeDraggingTargetService: TreeDraggingTargetService) {\n        this.emitterMap = Object.keys(TREE_EVENTS).reduce((map, name) => {\n            if (!this.hasOwnProperty(name)) {\n                throw new TypeError(`Unmatched events: [${name}]`)\n            }\n\n            this[name] = map[name] = new EventEmitter()\n\n            return map\n        }, {}) as any\n\n        this.UIOptions = createTreeUIOptions()\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.nodes && changes.nodes.currentValue) {\n            const oldTreeModel = this.treeModel\n            this.treeModel = new TreeModel(changes.nodes.currentValue, this.emitterMap, this.dataOptions)\n            if (oldTreeModel && this.keepNodesExpanded) {\n                oldTreeModel.expandedNodes.forEach(node => {\n                    this.treeModel.setExpandedNodeInPlace(node)\n                })\n            }\n            if (!changes.nodes.isFirstChange()) {\n                this.refreshTree = true\n            }\n        } else if (changes.dataOptions && changes.dataOptions.currentValue && this.treeModel) {\n            this.treeModel.updateOptions(changes.dataOptions.currentValue)\n        }\n\n        if (changes.focusTarget && changes.focusTarget.currentValue && this.treeModel) {\n            this.treeModel.focusNode(this.focusTarget)\n        }\n\n        if (changes.activateTarget && changes.activateTarget.currentValue && this.treeModel) {\n            this.treeModel.activateNode(this.activateTarget)\n        }\n\n        if (changes.allowDrag\n            || changes.allowDrop\n            || changes.levelPadding\n            || changes.useVirtualScroll\n            || changes.nodeClass) {\n            this.UIOptions = createTreeUIOptions({\n                allowDrag: this.allowDrag,\n                allowDrop: this.allowDrop,\n                levelPadding: this.levelPadding,\n                useVirtualScroll: this.useVirtualScroll,\n                nodeClass: this.nodeClass,\n            })\n        }\n    }\n\n    ngOnDestroy() {\n        each(this.emitterMap, function (emitter) {\n            emitter.complete()\n        })\n    }\n\n    @HostListener('body: keydown', ['$event'])\n    onKeydown($event) {\n        if (!this.treeModel.isFocused) {\n            return\n        }\n\n        if (['input', 'textarea'].includes(document.activeElement.tagName.toLowerCase())) {\n            return\n        }\n\n        const focusedNode = this.treeModel.focusedNode\n\n        this.treeModel.performKeyAction(focusedNode, $event)\n    }\n\n    @HostListener('body: mousedown', ['$event'])\n    onMousedown($event) {\n        const insideClick = $event.target.closest('ngx-tree')\n\n        if (!insideClick) {\n            this.treeModel.setFocus(false)\n        }\n    }\n\n    sizeChanged() {\n        this.viewportComponent.setViewport()\n    }\n\n}\n",
    "import { Injectable } from '@angular/core'\nimport { Subject } from 'rxjs'\nimport { TreeNode } from '../models'\n\n@Injectable()\nexport class TreeDraggingTargetService extends Subject<TreeNode> {\n    _draggedElement: TreeNode = null\n\n    set (draggedElement: TreeNode) {\n        this._draggedElement = draggedElement\n    }\n\n    get () {\n        return this._draggedElement\n    }\n\n    isDragging() {\n        return !!this.get()\n    }\n}\n",
    "import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    HostBinding,\n    HostListener,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Renderer2,\n    SimpleChanges,\n} from '@angular/core'\nimport { merge, Subscription } from 'rxjs'\nimport { TREE_EVENTS } from '../../constants/events'\nimport { ScrollIntoViewTarget, TreeModel } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\n\nconst DISABLE_ON_SCROLL_CLASS = 'disable-events-on-scroll'\n\n@Component({\n    selector: 'ngx-tree-viewport',\n    template: `<ng-content></ng-content>\n`,\n    styles: [`:host{height:100%;overflow:auto;display:block}`],\n    providers: [TreeVirtualScroll],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeViewportComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n    lastScrollTop = 0\n    isScrolling = false\n\n    @Input() enable: boolean\n\n    @Input() treeModel: TreeModel\n\n    @HostBinding('class.tree-viewport') className = true\n\n    private ticking = false\n    private scrollIntoViewTicking = false\n    private lastScrollIntoViewTarget: ScrollIntoViewTarget\n    private structureChangeSub = Subscription.EMPTY\n    private scrollIntoViewSub = Subscription.EMPTY\n    private scrollTimer: number\n\n    constructor(public virtualScroll: TreeVirtualScroll, private elementRef: ElementRef, private renderer: Renderer2) {\n    }\n\n    @HostListener('scroll', ['$event'])\n    onScroll(event) {\n        this.disableEventsWhenScrolling()\n        if (this.virtualScroll.isDisabled()) {\n            return\n        }\n\n        const currentScrollTop = this.elementRef.nativeElement.scrollTop\n        if (Math.abs(currentScrollTop - this.lastScrollTop) < this.virtualScroll.averageNodeHeight) {\n            return false\n        }\n\n        this.lastScrollTop = currentScrollTop\n\n        if (!this.ticking) {\n            window.requestAnimationFrame(() => {\n                this.setViewport()\n                this.ticking = false\n            })\n            this.ticking = true\n        }\n\n        event.preventDefault()\n        event.stopPropagation()\n\n        return false\n    }\n\n    ngOnInit() {\n        this.scrollIntoViewSub = this.treeModel.scrollIntoView$.subscribe((target: ScrollIntoViewTarget) => {\n            if (target.node.elementRef) {\n                this.scrollIntoViewAndTick(target, () => {\n                    const lastTarget = this.lastScrollIntoViewTarget\n                    if (lastTarget.node.elementRef.nativeElement.scrollIntoViewIfNeeded) {\n                        lastTarget.node.elementRef.nativeElement.scrollIntoViewIfNeeded(lastTarget.scrollToMiddle)\n                    } else {\n                        lastTarget.node.elementRef.nativeElement.scrollIntoView({\n                            behavior: 'auto',\n                            block: 'end',\n                        })\n                    }\n                })\n            }\n        })\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if ('treeModel' in changes) {\n            this.virtualScroll.setDisabled(!this.enable)\n            if (this.virtualScroll.isDisabled()) {\n                if (!changes.treeModel.isFirstChange()) {\n                    this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n                }\n\n                return\n            }\n\n            this.initEventSubscription()\n            this.virtualScroll.reCalcPositions(this.treeModel)\n\n            if (!changes.treeModel.isFirstChange()) {\n                // use setTimeout to avoid do calculation on old data,\n                // let the new data render first round\n                setTimeout(() => {\n                    this.setViewport()\n                    this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n                })\n            }\n        }\n    }\n\n    ngAfterViewInit() {\n        setTimeout(() => {\n            if (this.virtualScroll.isDisabled()) {\n                this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n\n                return\n            }\n\n            this.virtualScroll.reCalcPositions(this.treeModel)\n            this.setViewport()\n            this.treeModel.fireEvent({ eventName: TREE_EVENTS.initialized })\n        })\n    }\n\n    ngOnDestroy() {\n        if (this.structureChangeSub) {\n            this.structureChangeSub.unsubscribe()\n        }\n        if (this.scrollIntoViewSub) {\n            this.scrollIntoViewSub.unsubscribe()\n        }\n    }\n\n    scrollIntoViewAndTick(target: ScrollIntoViewTarget, scrollCallback: Function) {\n        this.lastScrollIntoViewTarget = target\n        if (!this.scrollIntoViewTicking) {\n            window.requestAnimationFrame(() => {\n                scrollCallback()\n                this.scrollIntoViewTicking = false\n            })\n            this.scrollIntoViewTicking = true\n        }\n    }\n\n    initEventSubscription() {\n        this.ngOnDestroy()\n        this.scrollIntoViewSub = this.treeModel.scrollIntoView$.subscribe((target: ScrollIntoViewTarget) => {\n            this.scrollIntoViewAndTick(target, () => {\n                const lastTarget = this.lastScrollIntoViewTarget\n                const targetOffset = this.virtualScroll.scrollIntoView(lastTarget.node, lastTarget.force, lastTarget.scrollToMiddle)\n\n                if (targetOffset) {\n                    this.elementRef.nativeElement.scrollTop = targetOffset\n                }\n            })\n        })\n\n        this.structureChangeSub = merge(\n            this.treeModel.events.expand,\n            this.treeModel.events.collapse,\n            this.treeModel.events.loadChildren,\n            this.treeModel.events.changeFilter,\n            this.treeModel.events.addNode,\n            this.treeModel.events.removeNode,\n        )\n            .subscribe(() => {\n                this.virtualScroll.reCalcPositions(this.treeModel)\n                this.setViewport()\n            })\n    }\n\n    setViewport() {\n        if (this.virtualScroll.isDisabled()) {\n            return\n        }\n\n        this.virtualScroll.adjustViewport(\n            this.elementRef.nativeElement.getBoundingClientRect(),\n            this.lastScrollTop,\n        )\n    }\n\n    private disableEventsWhenScrolling() {\n        if (this.scrollTimer) {\n            clearTimeout(this.scrollTimer)\n        } else {\n            this.isScrolling = true\n            this.renderer.addClass(this.elementRef.nativeElement, DISABLE_ON_SCROLL_CLASS)\n        }\n\n        this.scrollTimer = <any>setTimeout(() => {\n            this.isScrolling = false\n            this.renderer.removeClass(this.elementRef.nativeElement, DISABLE_ON_SCROLL_CLASS)\n\n            this.scrollTimer = null\n        }, 120)\n    }\n}\n",
    "import { Component, HostBinding, Input } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node',\n    template: `<ng-template [ngIf]=\"!templates.treeNodeFullTemplate\">\n  <ngx-tree-node-wrapper [style.padding-left]=\"options.levelPadding(node)\"\n                         [node]=\"node\"\n                         [options]=\"options\"\n                         [index]=\"index\"\n                         [templates]=\"templates\"\n                         [class.tree-node-wrapper-active]=\"node.isActive\"\n                         [class.tree-node-wrapper-focused]=\"node.isFocused\"\n                         (click)=\"node.mouseAction('click', $event)\"\n                         (dblclick)=\"node.mouseAction('dblClick', $event)\"\n                         (contextmenu)=\"node.mouseAction('contextMenu', $event)\"\n                         (ngxTreeDrop)=\"node.onDrop($event)\"\n                         (treeDropDragOver)=\"node.mouseAction('dragOver', $event)\"\n                         (treeDropDragLeave)=\"node.mouseAction('dragLeave', $event)\"\n                         (treeDropDragEnter)=\"node.mouseAction('dragEnter', $event)\"\n                         [treeAllowDrop]=\"allowDrop\"\n                         [ngxTreeDrag]=\"node\"\n                         [treeDragEnabled]=\"allowDrag(node)\">\n  </ngx-tree-node-wrapper>\n\n  <ngx-tree-node-children *ngIf=\"node.isExpanded && node.hasVisibleChildren\"\n                          [node]=\"node\"\n                          [options]=\"options\"\n                          [children]=\"node.visibleChildren\"\n                          [templates]=\"templates\"></ngx-tree-node-children>\n</ng-template>\n\n<ng-container\n  [ngTemplateOutlet]=\"templates.treeNodeFullTemplate\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node, index: index, options: options, templates: templates }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;position:relative}`],\n})\nexport class TreeNodeComponent {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() index: number\n    @Input() templates: any\n\n    @HostBinding('class.tree-node') className = true\n\n    get allowDrop() {\n        return (node: TreeNode, $event?: DragEvent) => {\n            return isFunction(this.options.allowDrop)\n                ? this.options.allowDrop(node, { parent: this.node, index: node.index }, $event)\n                : this.options.allowDrop\n        }\n    }\n\n    allowDrag(node: TreeNode) {\n        return isFunction(this.options.allowDrag) ? this.options.allowDrag(node) : this.options.allowDrag\n    }\n}\n",
    "import { AfterViewInit, Component, ElementRef, HostBinding, Input, OnDestroy, OnInit, } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\n\n@Component({\n    selector: 'ngx-tree-node-wrapper',\n    template: `<ng-template [ngIf]=\"!templates.treeNodeWrapperTemplate\">\n  <ngx-tree-node-expander [node]=\"node\"\n                          [index]=\"index\"\n                          [options]=\"options\"\n                          [template]=\"templates.expanderTemplate\"></ngx-tree-node-expander>\n\n  <ngx-tree-node-content [node]=\"node\"\n                         [index]=\"index\"\n                         [options]=\"options\"\n                         [template]=\"templates.treeNodeTemplate\">\n  </ngx-tree-node-content>\n</ng-template>\n\n<ng-container [ngTemplateOutlet]=\"templates.treeNodeWrapperTemplate\"\n              [ngTemplateOutletContext]=\"{\n                $implicit: null,\n                node: node,\n                index: index,\n                options: options,\n                templates: templates\n              }\">\n</ng-container>\n`,\n    styles: [`:host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}:host ::ng-deep .tree-node-content:hover{background-color:#f7fbff}:host(.ngx-tree-dragging-target) ::ng-deep .tree-node-expander{visibility:hidden}:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content,:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content:hover,:host(.tree-node-wrapper-active).tree-node-wrapper-focused ::ng-deep .tree-node-content{background-color:#beebff}:host(.tree-node-wrapper-focused) ::ng-deep .tree-node-content{background-color:#e7f4f9}:host ::ng-deep .tree-node-content:hover,:host(.tree-node-wrapper-active) ::ng-deep .tree-node-content,:host(.tree-node-wrapper-focused) ::ng-deep .tree-node-content{-webkit-box-shadow:inset 0 0 1px #999;box-shadow:inset 0 0 1px #999}:host(.is-dragging-over) .tree-node-content{position:relative;z-index:1;background-color:#dfe;-webkit-box-shadow:inset 0 0 1px #999;box-shadow:inset 0 0 1px #999;outline:#888 dashed 2px}:host(.is-dragging-over) .tree-node-content *,:host(.is-dragging-over) .tree-node-expander *{pointer-events:none}:host(.is-dragging-over-disabled) .tree-node-content{opacity:.5}`],\n})\nexport class TreeNodeWrapperComponent implements OnInit, OnDestroy, AfterViewInit {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() index: number\n    @Input() templates: any\n\n    @HostBinding('class.tree-node-wrapper') className = true\n\n    constructor(private virtualScroll: TreeVirtualScroll, private elementRef: ElementRef) {\n    }\n\n    ngOnInit() {\n        this.node.elementRef = this.elementRef\n    }\n\n    ngOnDestroy() {\n        this.node.elementRef = null\n    }\n\n    ngAfterViewInit() {\n        if (!this.virtualScroll.isDisabled() && !this.virtualScroll.hasEnoughNodeHeight) {\n            this.virtualScroll.reportNodeHeight(this.elementRef.nativeElement.getBoundingClientRect().height)\n        }\n    }\n}\n",
    "import { Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-expander',\n    template: `<ng-template [ngIf]=\"!template\">\n  <div *ngIf=\"node.hasChildren\"\n        class=\"toggle-children-wrapper\"\n        [class.toggle-children-expanded]=\"node.isExpanded\"\n        [class.toggle-children-collapsed]=\"node.isCollapsed\"\n        (click)=\"node.mouseAction('expanderClick', $event)\">\n    <span class=\"toggle-children\"></span>\n  </div>\n\n  <div *ngIf=\"!node.hasChildren\"\n        class=\"toggle-children-placeholder\"></div>\n</ng-template>\n\n<ng-container [ngTemplateOutlet]=\"template\"\n              [ngTemplateOutletContext]=\"{\n                $implicit: null,\n                node: node,\n                index: index,\n                options: options\n              }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;white-space:nowrap}.toggle-children-expanded .toggle-children{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.toggle-children-collapsed .toggle-children{-webkit-transform:rotate(0);transform:rotate(0)}.toggle-children-wrapper{padding:0 3px;cursor:pointer}.toggle-children{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAASCAYAAABSO15qAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkYzRkRFQjcxODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkYzRkRFQjcwODUzNTExRTU4RTQwRkQwODFEOUZEMEE3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTk5NzA1OGEtZDI3OC00NDZkLWE4ODgtNGM4MGQ4YWI1NzNmIiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YzRkZmQxMGMtY2NlNS0xMTc4LWE5OGQtY2NkZmM5ODk5YWYwIi8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+Z2x5cGhpY29uczwvcmRmOmxpPiA8L3JkZjpBbHQ+IDwvZGM6dGl0bGU+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5iogFwAAAGhJREFUeNpiYGBgKABigf///zOQg0EARH4A4gZyDIIZ8B/JoAJKDIDhB0CcQIkBRBtEyABkgxwoMQCGD6AbRKoBGAYxQgXIBRuZGKgAKPIC3QLxArnRSHZCIjspk52ZKMrOFBUoAAEGAKnq593MQAZtAAAAAElFTkSuQmCC);height:8px;width:9px;background-size:contain;display:inline-block;background-repeat:no-repeat;background-position:center}.toggle-children-placeholder{display:block;height:15px;width:15px}`],\n})\nexport class TreeNodeExpanderComponent {\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() index: number\n    @Input() template: TemplateRef<any>\n\n    @HostBinding('class.tree-node-expander') className = true\n}\n",
    "import { ChangeDetectionStrategy, Component, Input } from '@angular/core'\nimport isFunction from 'lodash-es/isFunction'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-drop-slot',\n    template: `<div class=\"tree-node-drop-slot\"\n     (ngxTreeDrop)=\"onDrop($event)\"\n     [treeAllowDrop]=\"allowDrop\">\n</div>\n`,\n    styles: [`:host{display:block;width:100%;z-index:1}:host.prev-drop-slot{top:0}:host.next-drop-slot{bottom:0}.tree-node-drop-slot{display:block;height:4px;background-color:#f08080}.tree-node-drop-slot.is-dragging-over{background:#dfe;outline:#888 dashed 2px}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeNodeDropSlotComponent {\n    @Input() node: TreeNode\n    @Input() options: TreeUIOptions\n    @Input() dropIndex: number\n\n    allowDrop = (element, $event) =>\n        isFunction(this.options.allowDrop)\n            ? this.options.allowDrop(element, {\n                parent: this.node,\n                index: this.dropIndex,\n            }, $event)\n            : false\n\n    onDrop($event) {\n        this.node.mouseAction('drop', $event.event, {\n            from: $event.element,\n            to: { parent: this.node, index: this.dropIndex },\n        })\n    }\n}\n",
    "import { ChangeDetectionStrategy, Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode, TreeUIOptions } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-node-content',\n    template: `<span *ngIf=\"!template\">{{ node.displayField }}</span>\n\n<ng-container\n  [ngTemplateOutlet]=\"template\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node, index: index, options: options }\">\n</ng-container>\n`,\n    styles: [`:host{display:block;padding:2px 5px;border-radius:2px;-webkit-transition:background-color .15s,-webkit-box-shadow .15s;transition:background-color .15s,-webkit-box-shadow .15s;transition:background-color .15s,box-shadow .15s;transition:background-color .15s,box-shadow .15s,-webkit-box-shadow .15s;cursor:pointer;white-space:nowrap}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeNodeContentComponent {\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() index: number\n    @Input() template: TemplateRef<any>\n    @HostBinding('class.tree-node-content') className = true\n}\n",
    "import { animate, style, transition, trigger } from '@angular/animations'\nimport { Component, HostBinding, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, } from '@angular/core'\nimport { Subscription } from 'rxjs'\nimport { TreeNode, TreeUIOptions } from '../../models'\nimport { TreeVirtualScroll } from '../../services/tree-virtual-scroll.service'\nimport { binarySearch } from '../../util'\n\n/** Time and timing curve for expansion panel animations. */\nexport const EXPANSION_PANEL_ANIMATION_TIMING = '225ms cubic-bezier(0.4,0.0,0.2,1)'\n\n@Component({\n    selector: 'ngx-tree-node-children',\n    template: `<ngx-tree-node *ngFor=\"let child of viewportNodes; let i = index; trackBy: trackNode\"\n               [options]=\"options\"\n               [ngClass]=\"[options.nodeClass(child), 'tree-node-level-'+ child.level]\"\n               [class.tree-node-expanded]=\"child.isExpanded\"\n               [class.tree-node-collapsed]=\"child.isCollapsed\"\n               [class.tree-node-leaf]=\"child.isLeaf\"\n               [class.tree-node-active]=\"child.isActive\"\n               [class.tree-node-focused]=\"child.isFocused\"\n               [node]=\"child\"\n               [index]=\"i\"\n               [templates]=\"templates\">\n</ngx-tree-node>\n\n<ngx-tree-loading *ngIf=\"!node.children\"\n                  [style.padding-left]=\"options.levelPadding(node)\"\n                  [template]=\"templates.loadingTemplate\"\n                  [node]=\"node\"></ngx-tree-loading>\n`,\n    styles: [`:host{display:block;padding-left:20px}:host .tree-children-no-padding{padding-left:0}`],\n    animations: [\n        trigger('expandAnimation', [\n            transition(':enter', [\n                style({ height: 0, overflow: 'hidden' }),\n                animate(EXPANSION_PANEL_ANIMATION_TIMING, style({ height: '*' })),\n            ]),\n            transition(':leave', [\n                style({ height: '*', overflow: 'hidden' }),\n                animate(EXPANSION_PANEL_ANIMATION_TIMING, style({ height: 0 })),\n            ]),\n        ]),\n    ],\n})\nexport class TreeNodeChildrenComponent implements OnInit, OnChanges, OnDestroy {\n    marginTop = 0\n    viewportNodes: TreeNode[] = []\n\n    @Input() options: TreeUIOptions\n    @Input() node: TreeNode\n    @Input() templates: any\n    @Input() disableMarginTop = false\n    @Input() children: TreeNode[]\n    @Input() refreshTree = false\n\n    @HostBinding('@expandAnimation')\n    expandAnimation = true\n\n    @HostBinding('class.tree-node-children') className = true\n\n    private scrollSub = Subscription.EMPTY\n\n    constructor(private virtualScroll: TreeVirtualScroll) {\n    }\n\n    @HostBinding('class.tree-children-no-padding')\n    get noPadding() {\n        return !this.options.levelPadding\n    }\n\n    @HostBinding('style.margin-top.px')\n    get marginTopAttr() {\n        return this.disableMarginTop ? 0 : this.marginTop\n    }\n\n    ngOnInit() {\n        this.viewportNodes = this.children\n        this.scrollSub = this.virtualScroll.waitForCollection((metrics) => {\n            if (this.node.treeModel && this.node.isExpanded) {\n                // here we directly access node's visibleChildren but not component's `children`\n                // property is, because it will only be updated on next lifecycle check, which is\n                // after the collection notification\n                this.viewportNodes = this.getViewportNodes(this.node.visibleChildren, metrics)\n                this.marginTop = this.calcMarginTop()\n            }\n        })\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if ('children' in changes && changes.children.currentValue) {\n            this.viewportNodes = this.virtualScroll.isDisabled() || this.refreshTree\n                ? this.children : this.viewportNodes\n        }\n    }\n\n    ngOnDestroy() {\n        this.scrollSub.unsubscribe()\n    }\n\n    trackNode(index, node) {\n        return node.id\n    }\n\n    calcMarginTop() {\n        const firstNode = this.viewportNodes && this.viewportNodes.length && this.viewportNodes[0]\n\n        // condition on root node is because the virtual root's self height is 0\n        return firstNode\n            ? Math.max(0, firstNode.position - firstNode.parent.position -\n                (firstNode.parent.isRoot ? 0 : this.virtualScroll.averageNodeHeight))\n            : 0\n    }\n\n    getViewportNodes(nodes: TreeNode[], { startPos, endPos }) {\n        if (!nodes || !nodes.length) {\n            return []\n        }\n\n        // Search for first node in the viewport using binary search\n        // Look for first node that starts after the beginning of the viewport (with buffer)\n        // Or that ends after the beginning of the viewport\n        const firstIndex = binarySearch(nodes, (node) => {\n            return startPos <= node.position || (startPos <= node.position + node.height)\n        })\n\n        // Search for last node in the viewport using binary search\n        // Look for first node that starts after the end of the viewport (with buffer)\n        const lastIndex = binarySearch(nodes, (node) => {\n            return endPos < node.position || (endPos <= node.position + node.height)\n        }, firstIndex)\n\n        const viewportNodes = nodes.slice(firstIndex, lastIndex + 1)\n\n        // console.log(this.node.id, 'first: ', firstIndex, 'last: ', lastIndex, viewportNodes)\n\n        return viewportNodes\n    }\n}\n",
    "/**\n * a binary search function\n * @param nodes\n * @param condition\n * @param firstIndex\n */\nexport function binarySearch<T>(nodes: T[], condition: (item: T) => boolean, firstIndex = 0) {\n    let left = firstIndex\n    let right = nodes.length - 1\n\n    while (left !== right) {\n        const mid = Math.floor((left + right) / 2)\n\n        if (condition(nodes[mid])) {\n            right = mid\n        } else {\n            if (left === mid) {\n                left = right\n            } else {\n                left = mid\n            }\n        }\n    }\n\n    return left\n}\n",
    "import { Inject, Injectable, InjectionToken } from '@angular/core'\nimport { BehaviorSubject, Subject, Subscription } from 'rxjs'\nimport { filter, scan } from 'rxjs/operators'\nimport { TreeModel, TreeNode } from '../models'\n\nconst Y_OFFSET_NODE_SIZE = 3\nlet id = 0\n\nexport const VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA = new InjectionToken('VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA')\n\n@Injectable()\nexport class TreeVirtualScroll {\n    id: number\n    averageNodeHeight = 0\n    hasEnoughNodeHeight = false\n\n    private currentViewport: ClientRect\n    private lastScrollTop = 0\n    private disabled = false\n\n    private collectionMonitor$ = new BehaviorSubject(null)\n    private nodeHeightAnalytics$ = new Subject()\n\n    constructor(@Inject(VIRTUAL_SCROLL_NODE_HEIGHT_QUOTA) private quota: number) {\n        this.id = id++\n        this.collectAverageNodeHeight()\n    }\n\n    adjustViewport(viewport: ClientRect, scrollTop: number) {\n        this.lastScrollTop = scrollTop\n        this.currentViewport = viewport\n\n        const Y_OFFSET = this.averageNodeHeight * Y_OFFSET_NODE_SIZE\n\n        const startPos = scrollTop > Y_OFFSET ? scrollTop - Y_OFFSET : 0\n        const endPos = viewport.height + scrollTop + Y_OFFSET\n\n        this.collectionMonitor$.next({\n            startPos,\n            endPos,\n        })\n    }\n\n    waitForCollection(observer): Subscription {\n        return this.collectionMonitor$\n            .pipe(filter(val => !!val))\n            .subscribe(observer)\n    }\n\n    reportNodeHeight(data) {\n        this.nodeHeightAnalytics$.next(data)\n    }\n\n    reCalcPositions(treeModel: TreeModel) {\n        // here we reset the root nodes' positions to properly recalculate the positions\n        // after some actions like filter\n        treeModel.roots.forEach(node => {\n            node.position = 0\n        })\n        treeModel.virtualRoot.height = this.getPositionAfter(treeModel.getVisibleRoots(), 0)\n    }\n\n    setDisabled(isDisabled) {\n        this.disabled = isDisabled\n    }\n\n    isDisabled() {\n        return this.disabled\n    }\n\n    scrollIntoView(node: TreeNode, force: boolean, scrollToMiddle = true) {\n        if (force || // force scroll to node\n            node.position < this.lastScrollTop || // node is above viewport\n            node.position + this.averageNodeHeight > this.lastScrollTop + this.currentViewport.height) { // node is below viewport\n\n            return scrollToMiddle ? node.position - this.currentViewport.height / 2 + this.averageNodeHeight : // scroll to middle\n                node.position // scroll to start\n        }\n\n        return null\n    }\n\n    private getPositionAfter(nodes: TreeNode[], startPos: number) {\n        let position = startPos\n\n        nodes.forEach((node) => {\n            node.position = position\n            // as node is hidden, it should play as a shadow node for it next sibling node for\n            // the proper position splitting\n            position = this.getPositionAfterNode(node, node.position, node.isHidden)\n        })\n\n        return position\n    }\n\n    private getPositionAfterNode(node: TreeNode, startPos: number, isPrevShadow = false) {\n        let position = isPrevShadow ? startPos : this.averageNodeHeight + startPos\n\n        if (node.children && node.isExpanded) { // TBD: consider loading component as well\n            position = this.getPositionAfter(node.visibleChildren, position)\n        }\n\n        // todo: here we assume the loading component's height is the same as averageNodeHeight\n        node.height = position - startPos + (node.loadingChildren ? this.averageNodeHeight : 0)\n\n        return position\n    }\n\n    private collectAverageNodeHeight() {\n        this.nodeHeightAnalytics$\n            .pipe(scan<number, number[]>((acc, cur) => {\n                const lastAvg = acc[0] / acc[1]\n                const sum = cur + acc[0]\n                const count = acc[1] + 1\n                const avg = sum / count\n                if (avg / lastAvg > 1.5 || lastAvg / avg > 1.5) {\n                    return [cur, 1]\n                }\n\n                return [sum, count]\n            }, [0, 0]))\n            .subscribe(pair => {\n                this.averageNodeHeight = pair[0] / pair[1]\n                if (pair[1] >= this.quota) {\n                    this.hasEnoughNodeHeight = true\n                }\n            })\n    }\n}\n",
    "import { ChangeDetectionStrategy, Component, HostBinding, Input, TemplateRef } from '@angular/core'\nimport { TreeNode } from '../../models'\n\n@Component({\n    selector: 'ngx-tree-loading',\n    template: `<span *ngIf=\"!template\">loading...</span>\n\n<ng-container\n  [ngTemplateOutlet]=\"template\"\n  [ngTemplateOutletContext]=\"{ $implicit: null, node: node }\">\n</ng-container>\n`,\n    styles: [`:host{white-space:nowrap}`],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TreeLoadingComponent {\n    @Input() template: TemplateRef<any>\n    @Input() node: TreeNode\n\n    @HostBinding('class.tree-loading') className = true\n}\n",
    "import { Partial, PartialDeep } from 'lodash'\nimport compact from 'lodash-es/compact'\nimport find from 'lodash-es/find'\nimport first from 'lodash-es/first'\nimport isFunction from 'lodash-es/isFunction'\nimport isString from 'lodash-es/isString'\nimport last from 'lodash-es/last'\nimport { Observer, Subject } from 'rxjs'\nimport { EventsMap, TREE_EVENTS } from '../constants/events'\nimport { TreeEvent } from './events'\nimport { TreeNode } from './tree-node'\nimport { createTreeDataOptions, TreeDataOptions } from './tree-options'\n\nexport interface ScrollIntoViewTarget {\n    node: TreeNode\n    force: boolean\n    scrollToMiddle: boolean\n}\n\nexport class TreeModel {\n    /**\n     * static cache for recording the tree model while using multiple tree component in same container.\n     */\n    static focusedTree: TreeModel = null\n\n    /**\n     * All root nodes, it will have one item if a user input a single root tree.\n     */\n    roots: TreeNode[]\n    /**\n     * a tree node created internally to represent the root node of input data\n     */\n    readonly virtualRoot: TreeNode\n    readonly scrollIntoView$: Subject<ScrollIntoViewTarget> = new Subject()\n\n    /**\n     * Is the tree currently focused\n     */\n    get isFocused() {\n        return TreeModel.focusedTree === this\n    }\n\n    /**\n     * if the tree is empty\n     */\n    get isEmptyTree() {\n        return this.roots && this.roots.length === 0\n    }\n\n    /**\n     * Current focused node\n     */\n    get focusedNode() {\n        return this.focusedNodeId ? this.getNodeById(this.focusedNodeId) : null\n    }\n\n    /**\n     * @returns Current expanded nodes\n     */\n    get expandedNodes(): TreeNode[] {\n        const nodes = Array.from(this.expandedNodeIds.keys())\n            .filter((id) => this.expandedNodeIds.get(id))\n            .map((id) => this.getNodeById(id))\n\n        return compact(nodes)\n    }\n\n    /**\n     * @returns Current active (selected) nodes\n     */\n    get activeNodes(): TreeNode[] {\n        const nodes = Array.from(this.activeNodeIds.keys())\n            .filter((id) => this.activeNodeIds.get(id))\n            .map((id) => this.nodeCache.get(id))\n\n        return compact(nodes)\n    }\n\n    private focusedNodeId: string = null\n    private expandedNodeIds: Map<string, boolean> = new Map()\n    private activeNodeIds: Map<string, boolean> = new Map()\n    private hiddenNodeIds: Map<string, boolean> = new Map()\n    private nodeCache: Map<string, TreeNode> = new Map()\n\n    constructor(\n        private nodes: any[],\n        public events: EventsMap,\n        /**\n         * Options that are passed to the tree component\n         */\n        public options?: TreeDataOptions,\n    ) {\n        this.options = createTreeDataOptions(options)\n        const virtualRootConfig = {\n            virtual: true,\n            // todo: determine to use fixed children field later\n            [this.options.childrenField]: this.nodes,\n        }\n\n        this.virtualRoot = new TreeNode(virtualRootConfig, null, this, 0)\n        this.setExpandedNodeInPlace(this.virtualRoot)\n\n        this.roots = this.virtualRoot.children\n    }\n\n    addCache(node: TreeNode) {\n        this.nodeCache.set(node.id, node)\n    }\n\n    updateOptions(options: TreeDataOptions) {\n        this.options = options\n    }\n\n    // events\n    fireEvent(event: TreeEvent) {\n        // event.treeModel = this\n\n        this.events[event.eventName].emit(event)\n    }\n\n    subscribe(eventName: string, fn: Observer<TreeEvent>) {\n        return this.events[eventName].subscribe(fn)\n    }\n\n    // getters\n    /**\n     * @returns Current active (selected) node. If multiple nodes are active - returns the first one.\n     */\n    getActiveNode(): TreeNode {\n        return this.activeNodes[0]\n    }\n\n    /**\n     * @returns All root nodes that pass the current filter\n     */\n    getVisibleRoots() {\n        return this.virtualRoot.visibleChildren\n    }\n\n    /**\n     * @param skipHidden  true or false - whether to skip hidden nodes\n     * @returns      first root of the tree\n     */\n    getFirstRoot(skipHidden = false) {\n        return first(skipHidden ? this.getVisibleRoots() : this.roots)\n    }\n\n    /**\n     * @param skipHidden  true or false - whether to skip hidden nodes\n     * @returns      last root of the tree\n     */\n    getLastRoot(skipHidden = false) {\n        return last(skipHidden ? this.getVisibleRoots() : this.roots)\n    }\n\n    // locating nodes\n    /**\n     * @param     path  array of node IDs to be traversed respectively\n     * @param     startNode  optional. Which node to start traversing from\n     * @returns   The node, if found - null otherwise\n     */\n    getNodeByPath(path: (string | number)[], startNode: TreeNode = null): TreeNode {\n        if (!path) {\n            return null\n        }\n\n        startNode = startNode || this.virtualRoot\n\n        if (path.length === 0) {\n            return startNode\n        }\n\n        if (!startNode.children) {\n            return null\n        }\n\n        const childId = path.shift()\n        const childNode = find<TreeNode>(startNode.children, { id: childId } as any)\n\n        if (!childNode) {\n            return null\n        }\n\n        return this.getNodeByPath(path, childNode)\n    }\n\n    /**\n     * @param     id  node ID to find\n     * @returns   The node, if found - null otherwise\n     */\n    getNodeById(id: string) {\n        return this.nodeCache.get(id)\n    }\n\n    /**\n     * @param     predicate - either an object or a function, used as a test condition on all nodes.\n     *            Could be every predicate that's supported by lodash's `find` method\n     * @param     startNode  optional. Which node to start traversing from\n     * @returns   First node that matches the predicate, if found - null otherwise\n     */\n    getNodeBy(predicate: (node: TreeNode) => boolean, startNode: TreeNode = null) {\n        // todo: refactor to a loop\n        startNode = startNode || this.virtualRoot\n\n        if (!startNode.children) {\n            return null\n        }\n\n        const found = find(startNode.children, predicate)\n\n        if (found) { // found in children\n            return found\n        } else { // look in children's children\n            for (const child of startNode.children) {\n                const foundInChildren = this.getNodeBy(predicate, child)\n                if (foundInChildren) {\n                    return foundInChildren\n                }\n            }\n        }\n    }\n\n    isNodeExpanded(node: TreeNode) {\n        return !!this.expandedNodeIds.get(node.id)\n    }\n\n    isNodeHidden(node: TreeNode) {\n        return !!this.hiddenNodeIds.get(node.id)\n    }\n\n    isNodeActive(node: TreeNode) {\n        return !!this.activeNodeIds.get(node.id)\n    }\n\n    isNodeFocused(node: TreeNode) {\n        return this.focusedNode === node\n    }\n\n    setActiveNode(node: TreeNode, isActive: boolean, isMulti = false) {\n        if (isMulti) {\n            this.setMultiActiveNodes(node, isActive)\n        } else {\n            this.setSingleActiveNode(node, isActive)\n        }\n\n        if (isActive) {\n            node.focus()\n            this.fireEvent({ eventName: TREE_EVENTS.activate, node })\n        } else {\n            this.fireEvent({ eventName: TREE_EVENTS.deactivate, node })\n        }\n    }\n\n    setExpandedNodeInPlace(node: TreeNode, isExpanded = true) {\n        this.expandedNodeIds.set(node.id, isExpanded)\n    }\n\n    setExpandedNode(node: TreeNode, isExpanded = true) {\n        this.expandedNodeIds.set(node.id, isExpanded)\n        if (isExpanded) {\n            this.fireEvent({ eventName: TREE_EVENTS.expand, node })\n        } else {\n            this.fireEvent({ eventName: TREE_EVENTS.collapse, node })\n        }\n        this.fireEvent({ eventName: TREE_EVENTS.toggleExpander, node, isExpanded })\n    }\n\n    setHiddenNode(node: TreeNode, isHidden = true) {\n        this.hiddenNodeIds.set(node.id, isHidden)\n    }\n\n    /**\n     * Set focus on a node\n     * @param node\n     */\n    setFocusedNode(node: TreeNode) {\n        this.focusedNodeId = node ? node.id : null\n    }\n\n    /**\n     * Focuses or blurs the tree\n     * @param value  true or false - whether to set focus or blur.\n     */\n    setFocus(value: boolean) {\n        TreeModel.focusedTree = value ? this : null\n    }\n\n    traverse(fn: (node: TreeNode) => any) {\n        this.roots.forEach((root) => root.traverse(fn))\n    }\n\n    activateNode(id) {\n        const target = this.getNodeById(id)\n        if (target) {\n            target.setActiveAndVisible()\n\n            return true\n        }\n\n        return false\n    }\n\n    focusNode(id: string) {\n        const target = this.getNodeById(id)\n        if (target) {\n            target.focus()\n\n            return true\n        }\n\n        return false\n    }\n\n    /**\n     * Focuses on the next node in the tree (same as down arrow)\n     */\n    focusNextNode() {\n        const previousNode = this.focusedNode\n        const nextNode = previousNode ? previousNode.findNextNode(true, true) : this.getFirstRoot(true)\n        if (nextNode) {\n            nextNode.focus()\n        }\n    }\n\n    /**\n     * Focuses on the previous node in the tree (same as up arrow)\n     */\n    focusPreviousNode() {\n        const previousNode = this.focusedNode\n        const nextNode = previousNode ? previousNode.findPreviousNode(true) : this.getLastRoot(true)\n        if (nextNode) {\n            nextNode.focus()\n        }\n    }\n\n    /**\n     * Focuses on the inner child of the current focused node (same as right arrow on an expanded node)\n     */\n    focusDrillDown() {\n        const previousNode = this.focusedNode\n        if (previousNode && previousNode.isCollapsed && previousNode.hasChildren) {\n            previousNode.toggleExpanded()\n        } else {\n            const nextNode = previousNode ? previousNode.getFirstChild(true) : this.getFirstRoot(true)\n            if (nextNode) {\n                nextNode.focus()\n            }\n        }\n    }\n\n    /**\n     * Focuses on the parent of the current focused node (same as left arrow on a collapsed node)\n     */\n    focusDrillUp() {\n        const previousNode = this.focusedNode\n        if (!previousNode) {\n            return\n        }\n\n        if (previousNode.isExpanded) {\n            previousNode.toggleExpanded()\n        } else {\n            const nextNode = previousNode.parent\n            if (nextNode) {\n                nextNode.focus()\n            }\n        }\n    }\n\n    /**\n     * expand all nodes\n     */\n    expandAll() {\n        this.roots.forEach((root) => root.expandAll())\n    }\n\n    /**\n     * collapse all nodes\n     */\n    collapseAll() {\n        this.roots.forEach((root) => root.collapseAll())\n    }\n\n    performKeyAction(node: TreeNode, $event: KeyboardEvent) {\n        // todo: the keyCode is deprecated on MDN, replace it some day\n        const action = this.options.actionMapping.keys[$event.keyCode]\n        if (action) {\n            $event.preventDefault()\n            action(this, node, $event)\n\n            return true\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Marks isHidden field in all nodes recursively according to the filter param.\n     * If a node is marked visible, all of its ancestors will be marked visible as well.\n     * @param filter  either a string or a function.\n     *   In case it's a string, it will be searched case insensitively in the node's display attribute\n     *   In case it's a function, it will be passed the node, and should return true if the node should be visible,\n     *     false otherwise\n     * @param autoShow  if true, make sure all nodes that passed the filter are visible\n     */\n    filterNodes(filter: string | ((node: TreeNode) => boolean), autoShow = true) {\n        let filterFn\n\n        if (!filter) {\n            return this.clearFilter()\n        }\n\n        // support function and string filter\n        if (isString(filter)) {\n            filterFn = (node) => node.displayField.toLowerCase().includes(filter.toLowerCase())\n        } else if (isFunction(filter)) {\n            filterFn = filter\n        } else {\n            throw new TypeError(`Don't know what to do with filter: ${filter}. It should be either a string or function`)\n        }\n\n        const ids = new Map()\n        this.roots.forEach((node) => this.filterNode(ids, node, filterFn, autoShow))\n        this.hiddenNodeIds = ids\n        this.fireEvent({ eventName: TREE_EVENTS.changeFilter })\n    }\n\n    /**\n     * Marks all nodes isHidden = false\n     */\n    clearFilter() {\n        this.hiddenNodeIds = new Map()\n        this.fireEvent({ eventName: TREE_EVENTS.changeFilter })\n    }\n\n    /**\n     * moves a node from one location in the tree to another\n     * @param node location has a from and a to attributes, each has a node and index attributes.\n     * The combination of node + index tells which node needs to be moved, and to where\n     * @param to\n     */\n    moveNode(node: TreeNode, to: { parent: TreeNode, index: number, dropOnNode: boolean }) {\n        const fromIndex = node.index\n        const fromParent = node.parent\n\n        if (!canMoveNode(node, fromIndex, to)) {\n            return\n        }\n\n        node.remove()\n\n        // Compensate for index if already removed from parent:\n        const toIndex = (fromParent === to.parent && to.index > fromIndex) ? to.index - 1 : to.index\n\n        if (to.dropOnNode) {\n            to.parent.appendChild(node.data)\n        } else {\n            to.parent.addChild(node.data, toIndex)\n        }\n\n        this.fireEvent({\n            eventName: TREE_EVENTS.moveNode,\n            node,\n            to: { parent: to.parent.data, index: toIndex },\n        })\n    }\n\n    scrollIntoView(node: TreeNode, force: boolean, scrollToMiddle: boolean) {\n        this.scrollIntoView$.next({\n            node, force, scrollToMiddle,\n        })\n    }\n\n    private filterNode(\n        ids: Map<string, boolean>,\n        node: TreeNode,\n        filterFn: (node: TreeNode) => boolean,\n        autoExpand: boolean,\n    ) {\n        // if node passes function then it's visible\n        let isVisible = filterFn(node)\n\n        if (node.children) {\n            // if one of node's children passes filter then this node is also visible\n            node.children.forEach((child) => {\n                if (this.filterNode(ids, child, filterFn, autoExpand)) {\n                    isVisible = true\n                }\n            })\n        }\n\n        // mark node as hidden\n        if (!isVisible) {\n            ids.set(node.id, true)\n        }\n\n        // auto expand parents to make sure the filtered nodes are visible\n        if (autoExpand && isVisible) {\n            node.ensureVisible()\n        }\n\n        return isVisible\n    }\n\n    private setSingleActiveNode(node: TreeNode, active: boolean) {\n        // Deactivate all other nodes:\n        this.activeNodes\n            .filter((activeNode) => activeNode !== node)\n            .forEach((activeNode) => {\n                this.fireEvent({ eventName: TREE_EVENTS.deactivate, node: activeNode })\n            })\n\n        if (active) {\n            this.activeNodeIds = new Map([[node.id, true]])\n        } else {\n            this.activeNodeIds = new Map()\n        }\n    }\n\n    private setMultiActiveNodes(node: TreeNode, active: boolean) {\n        this.activeNodeIds.set(node.id, active)\n    }\n}\n\nfunction canMoveNode(node: TreeNode, fromIndex: number, to: { parent: TreeNode, index: number }) {\n    // same node:\n    if (node.parent === to.parent && fromIndex === to.index) {\n        return false\n    }\n\n    return !to.parent.isDescendantOf(node)\n}\n",
    "import { ElementRef } from '@angular/core'\nimport first from 'lodash-es/first'\nimport last from 'lodash-es/last'\nimport pullAt from 'lodash-es/pullAt'\nimport without from 'lodash-es/without'\nimport { TREE_EVENTS } from '../constants/events'\nimport { TreeEvent } from './events'\nimport { TreeModel } from './tree-model'\nimport { TreeDataOptions } from './tree-options'\n\nexport class TreeNode {\n    /**\n     * The children of the node.\n     * By default is determined by 'node.data.children', unless stated otherwise in the options\n     */\n    children: TreeNode[]\n    /**\n     * top edge position relative to the top edge of scroll area\n     */\n    position = 0\n    /**\n     * the visual height of the node\n     */\n    height = 0\n    loadingChildren = false\n    elementRef: ElementRef\n\n    get isHidden() {\n        return this.treeModel.isNodeHidden(this)\n    }\n\n    get isExpanded() {\n        return this.treeModel.isNodeExpanded(this)\n    }\n\n    get isCollapsed() {\n        return !this.isExpanded\n    }\n\n    get isActive() {\n        return this.treeModel.isNodeActive(this)\n    }\n\n    get isFocused() {\n        return this.treeModel.isNodeFocused(this)\n    }\n\n    get isLeaf() {\n        return !this.hasChildren\n    }\n\n    get isRoot() {\n        return this.parent === null\n    }\n\n    /**\n     * Level in the tree (starts from 1).\n     */\n    get level() {\n        return this.parent ? this.parent.level + 1 : 0\n    }\n\n    /**\n     * Path in the tree: Array of IDs.\n     */\n    get path(): string[] {\n        return this.parent ? [...this.parent.path, this.id] : []\n    }\n\n    // helper get functions:\n    get hasChildren() {\n        return !!(this.data.hasChildren || (this.children && this.children.length > 0))\n    }\n\n    // helper get functions:\n    get hasVisibleChildren() {\n        return !!(this.data.hasChildren || (this.visibleChildren && this.visibleChildren.length > 0))\n    }\n\n    // proxy functions:\n    get options(): TreeDataOptions {\n        return this.treeModel.options\n    }\n\n    // field accessors:\n    /**\n     * The value of the node's field that is used for displaying its content.\n     * By default 'name', unless stated otherwise in the options\n     */\n    get displayField() {\n        return this.getField('display')\n    }\n\n    /**\n     * A unique key of this node among its siblings.\n     * By default it's the 'id' of the original node, unless stated otherwise in options.idField\n     */\n    get id() {\n        return this.getField('id')\n    }\n\n    set id(value) {\n        this.setField('id', value)\n    }\n\n    get visibleChildren() {\n        return (this.children || []).filter((node) => !node.isHidden)\n    }\n\n    constructor(\n        /**\n         * Pointer to the original data.\n         */\n        public data: any,\n        /**\n         * Parent node\n         */\n        public parent: TreeNode,\n        public treeModel: TreeModel,\n        /**\n         * index of the node inside its parent's children\n         */\n        public index: number,\n    ) {\n        // Make sure there's a unique id without overriding existing ids to work with immutable data structures\n        if (this.id === undefined || this.id === null) {\n            this.id = uuid()\n        }\n\n        treeModel.addCache(this)\n        if (data[this.options.isExpandedField]) {\n            treeModel.setExpandedNodeInPlace(this)\n        }\n\n        if (this.getField('children')) {\n            this.initChildren()\n        }\n    }\n\n    /**\n     * Fire an event to the renderer of the tree (if it was registered)\n     */\n    fireEvent(event: TreeEvent) {\n        this.treeModel.fireEvent(event)\n    }\n\n    getField(key: string) {\n        return this.data[this.options[`${key}Field`]]\n    }\n\n    setField(key: string, value) {\n        this.data[this.options[`${key}Field`]] = value\n    }\n\n    onDrop($event) {\n        this.mouseAction('drop', $event.event, {\n            from: $event.element,\n            to: { parent: this, index: 0, dropOnNode: true },\n        })\n    }\n\n    // traversing:\n    findAdjacentSibling(steps: number, skipHidden = false) {\n        return this.getParentChildren(skipHidden)[this.index + steps]\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns next sibling (or null)\n     */\n    findNextSibling(skipHidden = false) {\n        return this.findAdjacentSibling(+1, skipHidden)\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns previous sibling (or null)\n     */\n    findPreviousSibling(skipHidden = false) {\n        return this.findAdjacentSibling(-1, skipHidden)\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns first child (or null)\n     */\n    getFirstChild(skipHidden = false) {\n        const children = skipHidden ? this.visibleChildren : this.children\n\n        return first(children || [])\n    }\n\n    /**\n     * @param skipHidden whether to skip hidden nodes\n     * @returns last child (or null)\n     */\n    getLastChild(skipHidden = false) {\n        const children = skipHidden ? this.visibleChildren : this.children\n\n        return last(children || [])\n    }\n\n    /**\n     * Finds the visually next node in the tree.\n     * @param goInside whether to look for children or just siblings\n     * @param skipHidden\n     * @returns next node.\n     */\n    findNextNode(goInside = true, skipHidden = false) {\n        return goInside && this.isExpanded && this.getFirstChild(skipHidden) ||\n            this.findNextSibling(skipHidden) ||\n            this.parent && this.parent.findNextNode(false, skipHidden)\n    }\n\n    /**\n     * Finds the visually previous node in the tree.\n     * @param skipHidden whether to skip hidden nodes\n     * @returns previous node.\n     */\n    findPreviousNode(skipHidden = false) {\n        const previousSibling = this.findPreviousSibling(skipHidden)\n        if (!previousSibling) {\n            return this.parent\n        }\n\n        return previousSibling.getLastOpenDescendant(skipHidden)\n    }\n\n    /**\n     * @returns      true if this node is a descendant of the parameter node\n     */\n    isDescendantOf(node: TreeNode) {\n        if (this === node) {\n            return true\n        } else {\n            return this.parent && this.parent.isDescendantOf(node)\n        }\n    }\n\n    // helper methods:\n    loadChildren() {\n        if (!this.options.getChildren) {\n            return Promise.resolve() // Not getChildren method - for using redux\n        }\n\n        this.loadingChildren = true\n\n        return Promise.resolve(this.options.getChildren(this))\n            .then((children) => {\n                if (children) {\n                    this.setField('children', children)\n                    this.initChildren()\n                }\n            })\n            .then(() => {\n                this.loadingChildren = false\n                this.fireEvent({\n                    eventName: TREE_EVENTS.loadChildren,\n                    node: this,\n                })\n            })\n    }\n\n    /**\n     * Expands the node\n     */\n    expand() {\n        if (!this.isExpanded) {\n            return this.toggleExpanded()\n        }\n\n        return Promise.resolve()\n    }\n\n    /**\n     * Collapses the node\n     */\n    collapse() {\n        if (this.isExpanded) {\n            this.toggleExpanded()\n        }\n\n        return this\n    }\n\n    /**\n     * Invokes a method for every node under this one - depth first\n     * @param fn  a function that receives the node\n     */\n    traverse(fn: (node: TreeNode) => any) {\n        Promise.resolve(fn(this)).then(() => {\n            if (this.children) {\n                this.children.forEach((child) => child.traverse(fn))\n            }\n        })\n    }\n\n    /**\n     * expand all nodes under this one\n     */\n    expandAll() {\n        this.traverse((node) => node.expand())\n    }\n\n    /**\n     * collapse all nodes under this one\n     */\n    collapseAll() {\n        this.traverse((node) => node.collapse())\n    }\n\n    /**\n     * Expands / Collapses the node\n     */\n    toggleExpanded(isExpanded = !this.isExpanded) {\n        if (this.hasChildren) {\n            this.treeModel.setExpandedNode(this, isExpanded)\n\n            if (!this.children && this.hasChildren && isExpanded) {\n                return this.loadChildren()\n            }\n        }\n\n        return Promise.resolve()\n    }\n\n    setActive(isActive = true, isMulti = false) {\n        this.treeModel.setActiveNode(this, isActive, isMulti)\n\n        return this\n    }\n\n    /**\n     * @param isHidden  if true makes the node hidden, otherwise visible\n     */\n    setHidden(isHidden = true) {\n        this.treeModel.setHiddenNode(this, isHidden)\n\n        return this\n    }\n\n    /**\n     * Activates / Deactivates the node (selects / deselects)\n     */\n    toggleActivated(isMulti = false) {\n        this.setActive(!this.isActive, isMulti)\n\n        return this\n    }\n\n    setActiveAndVisible(isMulti = false) {\n        this.setActive(true, isMulti)\n            .ensureVisible()\n\n        this.scrollIntoView()\n\n        return this\n    }\n\n    /**\n     * Expands all ancestors of the node\n     */\n    ensureVisible() {\n        if (this.parent) {\n            this.parent.expand()\n            this.parent.ensureVisible()\n        }\n\n        return this\n    }\n\n    scrollIntoView(force = false, scrollToMiddle?: boolean) {\n        this.treeModel.scrollIntoView(this, force, scrollToMiddle)\n    }\n\n    /**\n     * Focus on the node\n     */\n    focus(scroll = true) {\n        const previousNode = this.treeModel.focusedNode\n        this.treeModel.setFocusedNode(this)\n        if (scroll) {\n            this.scrollIntoView()\n        }\n        if (previousNode) {\n            this.fireEvent({ eventName: TREE_EVENTS.blur, node: previousNode })\n        }\n        this.fireEvent({ eventName: TREE_EVENTS.focus, node: this })\n\n        return this\n    }\n\n    /**\n     * Blur (unfocus) the node\n     */\n    blur() {\n        const previousNode = this.treeModel.focusedNode\n        this.treeModel.setFocusedNode(null)\n        if (previousNode) {\n            this.fireEvent({ eventName: TREE_EVENTS.blur, node: this })\n        }\n\n        return this\n    }\n\n    /**\n     * Hides the node\n     */\n    hide() {\n        this.setHidden(true)\n\n        return this\n    }\n\n    /**\n     * Makes the node visible\n     */\n    show() {\n        this.setHidden(false)\n\n        return this\n    }\n\n    addChild(data: any, index: number) {\n        const node = new TreeNode(data, this, this.treeModel, index)\n\n        // If node doesn't have children - create children array\n        if (!this.getField('children')) {\n            this.setField('children', [])\n        }\n\n        if (this.children) {\n            this.getField('children').splice(index, 0, data)\n            this.children.splice(index, 0, node)\n            this.children = this.children.slice()\n        } else {\n            this.getField('children').push(data)\n            this.children = [node]\n        }\n\n        this.reCalcChildrenIndices(index)\n\n        this.fireEvent({ eventName: TREE_EVENTS.addNode, node })\n    }\n\n    appendChild(data) {\n        this.addChild(data, this.children ? this.children.length : 0)\n    }\n\n    remove() {\n        this.parent.removeChild(this)\n    }\n\n    removeChild(node: TreeNode) {\n        pullAt(this.getField('children'), node.index)\n        this.children = without(this.children, node)\n\n        this.reCalcChildrenIndices(0)\n\n        this.fireEvent({ eventName: TREE_EVENTS.removeNode, node })\n\n        if (node.isFocused) {\n            this.treeModel.setFocusedNode(null)\n            this.treeModel.setActiveNode(node, false)\n        }\n\n        if (node.isExpanded) {\n            this.treeModel.setExpandedNodeInPlace(node, false)\n        }\n\n        node.treeModel = null\n        node.elementRef = null\n    }\n\n    mouseAction(actionName: string, $event: MouseEvent, data: any = null) {\n        this.treeModel.setFocus(true)\n\n        const actionMapping = this.options.actionMapping.mouse\n        const action = actionMapping[actionName]\n\n        if (action) {\n            action(this.treeModel, this, $event, data)\n        }\n    }\n\n    private reCalcChildrenIndices(offset) {\n        this.children.slice(offset).forEach((child, index) => {\n            child.index = index + offset\n        })\n    }\n\n    private initChildren() {\n        this.children = this.getField('children')\n            .map((data, index) => new TreeNode(data, this, this.treeModel, index))\n    }\n\n    private getLastOpenDescendant(skipHidden = false) {\n        const lastChild = this.getLastChild(skipHidden)\n\n        return (this.isCollapsed || !lastChild)\n            ? this\n            : lastChild.getLastOpenDescendant(skipHidden)\n    }\n\n    private getParentChildren(skipHidden = false): TreeNode[] {\n        return this.parent\n            ? (skipHidden ? this.parent.visibleChildren : this.parent.children)\n            : []\n    }\n}\n\nlet _uuid = 0\n\nfunction uuid() {\n    return `ngx-tid-${_uuid++}`\n}\n",
    "import { EventEmitter } from '@angular/core'\nimport { TreeEvent } from '../models/index'\n\nexport const TREE_EVENTS = {\n    expand: 'expand',\n    collapse: 'collapse',\n    toggleExpander: 'toggleExpander',\n    activate: 'activate',\n    deactivate: 'deactivate',\n    focus: 'focus',\n    blur: 'blur',\n    initialized: 'initialized',\n    moveNode: 'moveNode',\n    loadChildren: 'loadChildren',\n    changeFilter: 'changeFilter',\n    removeNode: 'removeNode',\n    addNode: 'addNode',\n}\n\n/**\n * all events that the tree will trigger\n */\nexport interface EventsMap {\n    expand: EventEmitter<TreeEvent>\n    collapse: EventEmitter<TreeEvent>\n    toggleExpander: EventEmitter<TreeEvent>\n    /**\n     * normally triggered by clicking or tabbing the enter key\n     */\n    activate: EventEmitter<TreeEvent>\n    deactivate: EventEmitter<TreeEvent>\n    /**\n     * focus is different from activate, because focus can be changed by arrow keys of keyboard\n     */\n    focus: EventEmitter<TreeEvent>\n    blur: EventEmitter<TreeEvent>\n    initialized: EventEmitter<TreeEvent>\n    moveNode: EventEmitter<TreeEvent>\n    loadChildren: EventEmitter<TreeEvent>\n    changeFilter: EventEmitter<TreeEvent>\n    removeNode: EventEmitter<TreeEvent>\n    addNode: EventEmitter<TreeEvent>\n}\n",
    "import defaults from 'lodash-es/defaults'\nimport defaultsDeep from 'lodash-es/defaultsDeep'\nimport isNumber from 'lodash-es/isNumber'\nimport { defaultActionMapping } from './actions'\nimport { TreeModel } from './tree-model'\nimport { TreeNode } from './tree-node'\n\n/**\n * common functions to handle tree actions\n */\nexport interface ActionHandler {\n    (tree: TreeModel, node: TreeNode, $event: any, ...rest);\n}\n\n/**\n * a mapping model to link mouse events and keyboard events with actions\n */\nexport interface ActionMapping {\n    mouse?: {\n        click?: ActionHandler,\n        dblClick?: ActionHandler,\n        contextMenu?: ActionHandler,\n        expanderClick?: ActionHandler,\n        dragStart?: ActionHandler,\n        drag?: ActionHandler,\n        dragEnd?: ActionHandler,\n        dragOver?: ActionHandler,\n        dragLeave?: ActionHandler,\n        dragEnter?: ActionHandler,\n        drop?: ActionHandler,\n    };\n    keys?: {\n        [key: number]: ActionHandler\n    };\n}\n\nexport interface DropTarget {\n    parent: TreeNode\n    index: number\n}\n\nexport type IAllowDropFn = (element: TreeNode, to: DropTarget, $event?: DragEvent) => boolean\n\nexport type IAllowDragFn = (node: TreeNode) => boolean\n\nexport type ILevelPaddingFn = (node: TreeNode) => string\n\nexport const defaultUIOptions: TreeUIOptions = {\n    allowDrag: false,\n    allowDrop: false,\n    levelPadding: () => '0px',\n    useVirtualScroll: false,\n    nodeClass: () => '',\n}\n\nexport const defaultDataOptions: TreeDataOptions = {\n    childrenField: 'children',\n    displayField: 'name',\n    idField: 'id',\n    isExpandedField: 'isExpanded',\n    actionMapping: defaultActionMapping,\n    getChildren: (node) => null,\n}\n\nexport interface TreeUIOptions {\n    /**\n     * Specify if dragging tree nodes is allowed.\n     * This could be a boolean, or a function that receives a TreeNode and returns a boolean\n     *\n     * **Default value: false**\n     *\n     * Example:\n     * ```\n     * options = {\n     *   allowDrag: true\n     * }\n     * ```\n     */\n    allowDrag?: boolean | IAllowDragFn;\n    /**\n     * Specify whether dropping inside the tree is allowed. Optional types:\n     *  - boolean\n     *  - (element:any, to:{parent:ITreeNode, index:number}):boolean\n     * A function that receives the dragged element, and the drop location (parent node and index inside the parent),\n     * and returns true or false.\n     *\n     * **Default Value: true**\n     *\n     * example:\n     * ```\n     * options = {\n     *  allowDrop: (element, {parent, index}) => parent.isLeaf\n     * }\n     * ```\n     */\n    allowDrop?: boolean | IAllowDropFn;\n    /**\n     * Specify padding per node instead of children padding (to allow full row select for example)\n     */\n    levelPadding?: ILevelPaddingFn;\n    /**\n     * Boolean whether virtual scroll should be used.\n     * Increases performance for large trees\n     * Default is false\n     */\n    useVirtualScroll?: boolean;\n\n    /**\n     * Supply function for getting a custom class for the node component\n     */\n    nodeClass?(node: TreeNode): string;\n}\n\nexport interface RawTreeUIOptions {\n    allowDrag?: boolean | IAllowDragFn;\n    allowDrop?: boolean | IAllowDropFn;\n    levelPadding?: number | ILevelPaddingFn;\n    useVirtualScroll?: boolean;\n\n    nodeClass?(node: TreeNode): string;\n}\n\n/**\n * create tree options about UI with defaults\n * @param rawOpts\n */\nexport function createTreeUIOptions(rawOpts: RawTreeUIOptions = {}): TreeUIOptions {\n    const levelPaddingOpt = rawOpts.levelPadding\n    if (isNumber(levelPaddingOpt)) {\n        rawOpts.levelPadding = function (node: TreeNode) {\n            return (levelPaddingOpt + levelPaddingOpt * (node.level - 1)) + 'px'\n        }\n    }\n\n    return defaults({}, rawOpts, defaultUIOptions)\n}\n\nexport interface TreeDataOptions {\n    /**\n     * Override children field. Default: 'children'\n     */\n    childrenField?: string;\n    /**\n     * Override display field. Default: 'name'\n     */\n    displayField?: string;\n    /**\n     * Override id field. Default: 'id'\n     */\n    idField?: string;\n    /**\n     * Override isExpanded field. Default: 'isExpanded'\n     */\n    isExpandedField?: string;\n    /**\n     * Change the default mouse and key actions on the tree\n     */\n    actionMapping?: ActionMapping;\n\n    /**\n     * Supply function for getting fields asynchronously. Should return a Promise\n     */\n    getChildren?(node: TreeNode): Promise<any[]>;\n}\n\n/**\n * create tree options about data with defaults\n * @param rawOpts\n */\nexport function createTreeDataOptions(rawOpts: TreeDataOptions = {}): TreeDataOptions {\n    return defaultsDeep({}, rawOpts, defaultDataOptions)\n}\n\n// export const TREE_DATA_OPTIONS = new InjectionToken('TREE_DATA_OPTIONS')\n",
    "import { NUMBER_KEYS } from '../constants/keys'\nimport { TreeModel } from './tree-model'\nimport { TreeNode } from './tree-node'\nimport { ActionMapping } from './tree-options'\n\nexport const TREE_ACTIONS = {\n    TOGGLE_SELECTED: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(),\n    TOGGLE_SELECTED_MULTI: (tree: TreeModel, node: TreeNode, $event: any) => node && node.toggleActivated(true),\n    SELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setActive(true),\n    DESELECT: (tree: TreeModel, node: TreeNode, $event: any) => node.setActive(false),\n    FOCUS: (tree: TreeModel, node: TreeNode, $event: any) => node.focus(),\n    TOGGLE_EXPANDED: (tree: TreeModel, node: TreeNode, $event: any) => {\n        $event.stopPropagation()\n\n        return node.hasChildren && node.toggleExpanded()\n    },\n    EXPAND: (tree: TreeModel, node: TreeNode, $event: any) => node.expand(),\n    COLLAPSE: (tree: TreeModel, node: TreeNode, $event: any) => node.collapse(),\n    DRILL_DOWN: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillDown(),\n    DRILL_UP: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusDrillUp(),\n    NEXT_NODE: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusNextNode(),\n    PREVIOUS_NODE: (tree: TreeModel, node: TreeNode, $event: any) => tree.focusPreviousNode(),\n    MOVE_NODE: (\n        tree: TreeModel,\n        node: TreeNode,\n        $event: any,\n        { from, to }: { from: TreeNode; to: { parent: TreeNode; index: number, dropOnNode: boolean } },\n    ) => {\n        // default action assumes from = node, to = {parent, index}\n        tree.moveNode(from, to)\n    },\n}\n\nexport const defaultActionMapping: ActionMapping = {\n    mouse: {\n        click: TREE_ACTIONS.TOGGLE_SELECTED,\n        dblClick: null,\n        contextMenu: null,\n        expanderClick: TREE_ACTIONS.TOGGLE_EXPANDED,\n        drop: TREE_ACTIONS.MOVE_NODE,\n    },\n    keys: {\n        [NUMBER_KEYS.RIGHT]: TREE_ACTIONS.DRILL_DOWN,\n        [NUMBER_KEYS.LEFT]: TREE_ACTIONS.DRILL_UP,\n        [NUMBER_KEYS.DOWN]: TREE_ACTIONS.NEXT_NODE,\n        [NUMBER_KEYS.UP]: TREE_ACTIONS.PREVIOUS_NODE,\n        [NUMBER_KEYS.SPACE]: TREE_ACTIONS.TOGGLE_SELECTED,\n        [NUMBER_KEYS.ENTER]: TREE_ACTIONS.TOGGLE_SELECTED,\n    },\n}\n",
    "export const NUMBER_KEYS = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n}\n\nexport const STRING_KEYS = {\n    LEFT: 'ArrowLeft',\n    UP: 'ArrowUp',\n    RIGHT: 'ArrowRight',\n    DOWN: 'ArrowDown',\n    ENTER: 'Enter',\n    SPACE: ' ',\n}\n"
  ],
  "names": [
    "tslib_1.__extends",
    "filter",
    "tslib_1.__values"
  ],
  "mappings": "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"
}
